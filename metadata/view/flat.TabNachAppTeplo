{
    "type": "Ext.tab.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "activeTab": 0,
        "designer|userAlias": "tabnachappteplo",
        "designer|userClassName": "flat.TabNachAppTeplo",
        "height": 599,
        "id": "tabNachAppTeplo",
        "itemId": null,
        "width": 1133
    },
    "name": "MyTabPanel",
    "configAlternates": {
        "scrollable": "boolean"
    },
    "designerId": "64da8a4e-5705-4bdf-904f-c2528257688d",
    "viewControllerInstanceId": "9efe9e4e-466f-4103-b2a3-f4504fbc5fb4",
    "viewModelInstanceId": "3c2c5eb4-6235-486d-befa-3522491647cd",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": null,
                "collapseFirst": false,
                "id": "tabFmAppTeplo",
                "title": "настройка"
            },
            "name": "MyForm17",
            "designerId": "ee3a57bd-e7a2-4b08-b295-2a55c6e55250",
            "cn": [
                {
                    "type": "Ext.tab.Tab",
                    "reference": {
                        "name": "tabConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "name": "TabConfig7",
                    "designerId": "13706bee-bc2f-451a-9406-bc47af229fd5"
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": null,
                        "designer|snapToGrid": 5,
                        "formBind": true,
                        "height": 232,
                        "layout": "absolute",
                        "style": "background-color: #DCDCDC;",
                        "title": "Теплопосточання",
                        "width": 959
                    },
                    "name": "MyFieldSet47",
                    "configAlternates": {
                        "style": "string"
                    },
                    "designerId": "830494fb-82a1-41e9-83d4-ff3027ebdb4d",
                    "cn": [
                        {
                            "type": "Ext.form.RadioGroup",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "border": null,
                                "container|align": "stretch",
                                "fieldLabel": "Тип  опалювальне",
                                "formBind": true,
                                "frame": true,
                                "labelAlign": "top",
                                "layout": "vbox",
                                "layout|x": 5,
                                "layout|y": 40,
                                "style": "background-color: #f1eeee;",
                                "width": 165
                            },
                            "name": "MyRadioGroup3",
                            "configAlternates": {
                                "style": "string"
                            },
                            "designerId": "4e06504f-7791-4b57-9946-462abe24a95d",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Radio",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": "опалювальне",
                                        "checked": true,
                                        "fieldLabel": null,
                                        "inputValue": "1",
                                        "name": "type_teplo"
                                    },
                                    "name": "MyRadio7",
                                    "designerId": "e4be78f7-0eaf-4bb1-9bce-5c3675d5fa7f"
                                },
                                {
                                    "type": "Ext.form.field.Radio",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": "неопалювальне",
                                        "fieldLabel": null,
                                        "inputValue": "0",
                                        "name": "type_teplo"
                                    },
                                    "name": "MyRadio8",
                                    "designerId": "46c03d0b-de37-4276-b8e8-18db363183e4"
                                },
                                {
                                    "type": "Ext.form.field.Radio",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": " індивідуальна",
                                        "fieldLabel": null,
                                        "inputValue": "2",
                                        "name": "type_teplo"
                                    },
                                    "name": "MyRadio9",
                                    "designerId": "c4c9779d-9b71-4dda-bb8f-5b099cad241e"
                                },
                                {
                                    "type": "Ext.form.field.Radio",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": "комбінована система",
                                        "fieldLabel": null,
                                        "inputValue": "3",
                                        "name": "type_teplo"
                                    },
                                    "name": "MyRadio10",
                                    "designerId": "5a410dfe-894e-4634-b654-a34f58ec30e3"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "S_опалювальне (м&sup2;)",
                                "growMin": 35,
                                "hideEmptyLabel": false,
                                "labelSeparator": " ",
                                "labelWidth": 130,
                                "layout|x": 180,
                                "layout|y": 140,
                                "name": "area_otopl",
                                "style": "background-color: #f1eeee;",
                                "width": 185
                            },
                            "name": "MyTextField35",
                            "configAlternates": {
                                "scrollable": "boolean",
                                "style": "string"
                            },
                            "designerId": "27cd259e-a13e-4dcc-a56f-37e9fc43fe32"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "договор ЮТКЕ",
                                "height": null,
                                "icon": "resources/css/images/ico/yes.png",
                                "iconAlign": "right",
                                "id": "btnOpenWinDogovorYtke",
                                "layout|x": 180,
                                "layout|y": 5,
                                "style": null,
                                "text": "Договіра немає&nbsp;&nbsp;&nbsp;",
                                "textAlign": "left",
                                "width": 155
                            },
                            "name": "MyButton4",
                            "configAlternates": {
                                "scrollable": "boolean",
                                "style": "string"
                            },
                            "designerId": "44bc360f-3e47-4308-a708-86e8c8acc94d",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "event"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "//in use",
                                            "var winDogovor = Ext.ClassManager.instantiateByAlias('widget.windogovor');",
                                            "",
                                            "var dt = new Date();",
                                            "",
                                            "var form = winDogovor.down('#fmDogovor');",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var stAppartment = Ext.data.StoreManager.get(\"StAppartment\");",
                                            "",
                                            "var StDogovor = Ext.data.StoreManager.get(\"StDogovor\");",
                                            "",
                                            "var values =stUser.getAt(0);",
                                            "",
                                            "",
                                            "var record_app =stAppartment.getAt(0);",
                                            "//console.log(record_app);",
                                            "var login = values.get('login');",
                                            "var password = values.get('password');",
                                            "var address_id = values.get('address_id');",
                                            "",
                                            "StDogovor.load({",
                                            "    params: {",
                                            "        address_id:  values.get('address_id'),",
                                            "        what:'getDogovorYtke',",
                                            "        login:values.get('login'),",
                                            "        password:values.get('password')",
                                            "    },",
                                            "    callback: function(records,operation,success){",
                                            "",
                                            "",
                                            "        if(success){",
                                            "",
                                            "            if (records.length) {",
                                            "                form.getForm().loadRecord(records[0]);",
                                            "                form.down('#winBtnAddDogovor').setText('Обновить договор');",
                                            "                values.set({'vibor':'editDogovorYtke'});",
                                            "                stUser.sync();",
                                            "            } else {",
                                            "                form.down('#winBtnAddDogovor').setText('Добавить договор');",
                                            "                form.getForm().findField('start').setValue(Ext.Date.format(dt, 'd-m-Y'));",
                                            "                form.getForm().loadRecord(record_app);",
                                            "                values.set({'vibor':'addDogovorYtke'});",
                                            "                stUser.sync();",
                                            "",
                                            "            }",
                                            "",
                                            "        }",
                                            "    },",
                                            "    scope:this",
                                            "});",
                                            "",
                                            "winDogovor.show();",
                                            "//V",
                                            "//var nr =  Ext.getCmp('fldDogVik').getValue();",
                                            "//var data =  Ext.getCmp('fldDogVikData').getValue();",
                                            "",
                                            "",
                                            "",
                                            ""
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "9d595043-7b46-4214-927a-3969977366c5"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.Display",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "КП ЮТКЭ",
                                "labelSeparator": " ",
                                "labelStyle": "color: #8A8A8A; text-shadow: -1px -1px white, 1px 1px #333;font-size:12pt;",
                                "layout|x": 5,
                                "layout|y": 5,
                                "name": "aggr_teplo",
                                "style": "background-color: #f1eeee;",
                                "width": 165
                            },
                            "name": "MyDisplayField4",
                            "configAlternates": {
                                "scrollable": "boolean",
                                "style": "string"
                            },
                            "designerId": "3dae5376-44d5-477a-b584-63b93a9bc7cb",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "displayField"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "var retValue = '';",
                                            "switch (value) {",
                                            "    case 'да':",
                                            "    retValue ='<span><img class=\"icon\" src=\"resources/css/images/ico/yes.png\"/></span>';",
                                            "    break;",
                                            "    case 'нет':",
                                            "    retValue ='<span><img class=\"icon\" src=\"resources/css/images/ico/no.png\"/></span>';",
                                            "    break;",
                                            "}",
                                            "return retValue;"
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "f3fdf9d6-f963-497f-9259-bbc0039a710a"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Дог.ЮТКЕ",
                                "height": null,
                                "icon": "resources/css/images/ico/printer.png",
                                "layout|x": 340,
                                "layout|y": 5,
                                "scale": null,
                                "shim": false,
                                "text": "",
                                "tooltip": "Печать договора ЮТКЕ",
                                "tooltipType": "title",
                                "width": null
                            },
                            "name": "MyButton12",
                            "configAlternates": {
                                "tooltip": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "8e2717d7-5c07-4aff-8024-bb4dcaefa979",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "event"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "//M",
                                            "var me = this;",
                                            "var StUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var StReport = Ext.data.StoreManager.get(\"StReport\");",
                                            "var values =StUser.getAt(0);",
                                            "var addr = values.data.address_id;",
                                            "",
                                            "var usertype = 1;",
                                            "",
                                            "//V",
                                            "var tabPnCenter =  Ext.getCmp('tabPnCenter');//me.getTabPnCenter();",
                                            "",
                                            "",
                                            "//C",
                                            "",
                                            "if (addr) {",
                                            "",
                                            "    var report = 'DogovorYtke_flat';",
                                            "    var namereport = 'Договор кв. ЮТКЕ';",
                                            "",
                                            "    var value = {",
                                            "        login:values.get('login'),",
                                            "        password:values.get('password'),",
                                            "        report:report,",
                                            "        what:report,",
                                            "        address_id: addr",
                                            "    };",
                                            "",
                                            "    var tab = tabPnCenter.child('#'+report);",
                                            "",
                                            "    if (!tab) {",
                                            "        tab  = tabPnCenter.add({",
                                            "            xtype:'tabreportorg',",
                                            "            title:namereport,",
                                            "            id:''+report+''",
                                            "        });",
                                            "",
                                            "        tabPnCenter.setActiveTab(tab);",
                                            "",
                                            "    }else{",
                                            "",
                                            "        tabPnCenter.setActiveTab(tab);",
                                            "    }",
                                            "",
                                            "    var reppan = tab.getComponent(0);",
                                            "",
                                            "",
                                            "",
                                            "    // Basic mask:",
                                            "",
                                            "    var myMask =new Ext.LoadMask({",
                                            "        target: reppan ,",
                                            "        msg:\"Загрузка...\"",
                                            "    });",
                                            "    myMask.show();",
                                            "",
                                            "",
                                            "    QueryReport.getResults(value,function(data){",
                                            "        if (data){",
                                            "",
                                            "            //    reportHead.update(data.head);",
                                            "            reppan.update(data.content);",
                                            "            //      reportFoot.update(data.foot);",
                                            "            Ext.REPORTCONTENT =data.content;",
                                            "            myMask.hide();",
                                            "",
                                            "",
                                            "        } else {",
                                            "                myMask.hide();  ",
                                            "",
                                            "            Ext.MessageBox.show({",
                                            "                title: 'Ошибка ',",
                                            "                msg: 'Документ не создан',",
                                            "                buttons: Ext.MessageBox.OK,",
                                            "                icon: Ext.MessageBox.ERROR",
                                            "",
                                            "            });",
                                            "",
                                            "        }",
                                            "",
                                            "    });",
                                            "",
                                            "}"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "bf0ddbd6-7b6f-4bdc-8a1f-62792fc79812"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.FieldSet",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "height": 115,
                                "layout|x": 580,
                                "layout|y": 5,
                                "style": "background-color: #f1eeee;",
                                "title": "Дані трубопроводу",
                                "width": 165
                            },
                            "name": "MyFieldSet50",
                            "configAlternates": {
                                "style": "string"
                            },
                            "designerId": "581de5fa-2e36-4810-892d-4eb6c2d5bfd5",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldLabel": "Довжина",
                                        "hideTrigger": true,
                                        "labelWidth": 70,
                                        "layout|anchor": "100%",
                                        "name": "length",
                                        "padding": "10 0 0 0",
                                        "width": null
                                    },
                                    "name": "MyNumberField11",
                                    "designerId": "8f91b6fb-117b-4dec-a535-297525078e5c"
                                },
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldLabel": "Діаметр",
                                        "hideTrigger": true,
                                        "labelWidth": 70,
                                        "layout|anchor": "100%",
                                        "name": "diametr",
                                        "padding": null,
                                        "width": null
                                    },
                                    "name": "MyNumberField187",
                                    "designerId": "6d1604a3-1a69-49f3-bfbe-b038a6a444fe"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.FieldSet",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "height": 115,
                                "layout|x": 380,
                                "layout|y": 5,
                                "style": "background-color: #f1eeee;",
                                "title": "",
                                "width": 185
                            },
                            "name": "MyFieldSet13",
                            "configAlternates": {
                                "style": "string"
                            },
                            "designerId": "2feea751-0716-43c1-b7b8-d8718d00c1f6",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Checkbox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": "Ні",
                                        "fieldLabel": "Єнергоаудит",
                                        "inputValue": "1",
                                        "layout|anchor": "100%",
                                        "name": "enaudit",
                                        "padding": "15 0 0 0",
                                        "uncheckedValue": "0",
                                        "width": null
                                    },
                                    "name": "MyCheckbox55",
                                    "configAlternates": {
                                        "scrollable": "boolean"
                                    },
                                    "designerId": "eacdf377-eab8-4a23-9ec5-7d94b65d1be3",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onCheckboxfieldChange2121",
                                                "implHandler": [
                                                    "if(newValue){",
                                                    "    field.setBoxLabel(\"Так\");",
                                                    "}else{",
                                                    "    field.setBoxLabel(\"Ні\");",
                                                    "}"
                                                ],
                                                "name": "change",
                                                "scope": "me"
                                            },
                                            "name": "onCheckboxfieldChange2121",
                                            "designerId": "c1a9d158-8e3c-4646-9741-09f81c9f1b43"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "decimalPrecision": 3,
                                        "fieldLabel": "ТНЄ (Гкал/м&sup2;)",
                                        "hideTrigger": true,
                                        "labelWidth": 90,
                                        "layout|anchor": "100%",
                                        "name": "tne",
                                        "padding": null,
                                        "width": null
                                    },
                                    "name": "MyNumberField11",
                                    "designerId": "1b67827a-9a70-4f15-b2df-97b090607706"
                                },
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "decimalPrecision": 3,
                                        "fieldLabel": "КТЄ (коеф)",
                                        "hideTrigger": true,
                                        "labelWidth": 90,
                                        "layout|anchor": "100%",
                                        "name": "kte",
                                        "padding": null,
                                        "width": null
                                    },
                                    "name": "MyNumberField187",
                                    "designerId": "46219b20-bfa0-4fd0-8855-bd10f9f12225"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.FieldSet",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|x": 180,
                                "layout|y": 40,
                                "style": "background-color: #f1eeee;",
                                "title": "Користується послугами",
                                "width": 185
                            },
                            "name": "MyFieldSet3",
                            "configAlternates": {
                                "style": "string"
                            },
                            "designerId": "24dbdba4-034f-4e3e-be0a-003dfaf26e15",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Checkbox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": "Ні",
                                        "fieldLabel": "гвп",
                                        "inputValue": "да",
                                        "labelWidth": null,
                                        "layout|anchor": "100%",
                                        "name": "podogrev",
                                        "style": null,
                                        "uncheckedValue": "нет",
                                        "width": null
                                    },
                                    "name": "MyCheckbox22",
                                    "configAlternates": {
                                        "scrollable": "boolean",
                                        "style": "string"
                                    },
                                    "designerId": "96624062-b93f-49a3-90a6-5d2c589071a7",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onCheckboxfieldChange9",
                                                "implHandler": [
                                                    "if(newValue){",
                                                    "    field.setBoxLabel(\"Так\");",
                                                    "}else{",
                                                    "    field.setBoxLabel(\"Ні\");",
                                                    "}"
                                                ],
                                                "name": "change",
                                                "scope": "me"
                                            },
                                            "name": "onCheckboxfieldChange9",
                                            "designerId": "61200cba-c5be-40a5-a250-7f81d4b41885"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.field.Checkbox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": "Ні",
                                        "fieldLabel": "опалювальне",
                                        "inputValue": "да",
                                        "labelWidth": null,
                                        "layout|anchor": "100%",
                                        "name": "otoplenie",
                                        "style": null,
                                        "uncheckedValue": "нет",
                                        "width": null
                                    },
                                    "name": "MyCheckbox21",
                                    "configAlternates": {
                                        "scrollable": "boolean",
                                        "style": "string"
                                    },
                                    "designerId": "49f58a72-6ea1-409a-9389-2d65830ac35d",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onCheckboxfieldChange8",
                                                "implHandler": [
                                                    "if(newValue){",
                                                    "    field.setBoxLabel(\"Так\");",
                                                    "}else{",
                                                    "    field.setBoxLabel(\"Ні\");",
                                                    "}"
                                                ],
                                                "name": "change",
                                                "scope": "me"
                                            },
                                            "name": "onCheckboxfieldChange8",
                                            "designerId": "2f137704-8c82-4f26-b044-0115ade35cf4"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.Hidden",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "Label",
                                "id": "fldDogYtke",
                                "layout|x": 302,
                                "layout|y": 207,
                                "name": "dog_ytke"
                            },
                            "name": "MyHiddenField17",
                            "designerId": "dcd94b2b-f371-4aa7-8e13-86e11c01cfe5"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": null,
                                "formBind": true,
                                "height": null,
                                "icon": "resources/css/images/ico/xsldbg_refresh.png",
                                "id": "btnBtiTeplo",
                                "layout|x": 590,
                                "layout|y": 135,
                                "scale": "medium",
                                "text": "Оновить  дані",
                                "width": 150
                            },
                            "name": "MyButton55",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "df38f927-cfb8-4ae5-acc4-317a771a0a33",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "event"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "//LOGIN & PASSWORD",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var pvalues =stUser.getAt(0);",
                                            "var login = pvalues.get('login');",
                                            "var password = pvalues.get('password');",
                                            "",
                                            "var form = Ext.getCmp('tabFmAppTeplo');",
                                            "",
                                            "var stAppartment = Ext.data.StoreManager.get(\"StAppartment\");//QueryAddress.getResults <Appartment>",
                                            "",
                                            "var values=form.getValues();",
                                            "",
                                            "var address_id = values.address_id;",
                                            "var params = {",
                                            "    login:login,",
                                            "    password:password,",
                                            "    what:'AppartmentUpdateTeplo',",
                                            "    what_id:address_id",
                                            "};",
                                            "// console.log(values.address_id);",
                                            "Ext.Object.merge(values, params);",
                                            "",
                                            "// СОХРАНИТЬ ИЗМЕНЕНИЯ",
                                            "",
                                            "QueryAddress.updateRecords(values,function(result){",
                                            "",
                                            "    if (result.success){",
                                            "",
                                            "        Ext.MessageBox.show({",
                                            "            title: 'Оновити дані по квартирі!',",
                                            "            msg: result.msg,",
                                            "            buttons: Ext.MessageBox.OK,",
                                            "            icon: Ext.MessageBox.INFO,",
                                            "            buttonText:{",
                                            "                ok: \"Закрыть!\"",
                                            "            }",
                                            "        });",
                                            "",
                                            "        stAppartment.load({",
                                            "            params: {",
                                            "                what_id:address_id,",
                                            "                address_id: address_id,",
                                            "                what:'Appartment',",
                                            "                login:login,",
                                            "                password:password",
                                            "            },",
                                            "            callback: function(records,operation,success){",
                                            "                var rec = records[0];",
                                            "",
                                            "                if(success){",
                                            "",
                                            "                    form.getForm().loadRecord(rec);",
                                            "",
                                            "                }",
                                            "            },",
                                            "            scope:this",
                                            "        });",
                                            "",
                                            "",
                                            "",
                                            "    }else{",
                                            "        Ext.MessageBox.show({",
                                            "            title: 'Внесение изменений',",
                                            "            msg: 'Произошла ошибка',",
                                            "            buttons: Ext.MessageBox.OK,",
                                            "            buttonText:{",
                                            "                ok: \"Закрыть!\"",
                                            "            },",
                                            "            icon: Ext.MessageBox.WARNING",
                                            "        });",
                                            "    }",
                                            "});",
                                            ""
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "dc2868b6-c3ab-4c5d-923e-8158a615c36b"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.FieldSet",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "height": 165,
                                "layout|x": 755,
                                "layout|y": 5,
                                "style": "background-color: #f1eeee;",
                                "title": "прилади обліку (техніка)",
                                "width": 180
                            },
                            "name": "MyFieldSet17",
                            "configAlternates": {
                                "style": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "780293ec-e81e-4429-8446-0120887bb707",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Checkbox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": "Ні",
                                        "boxLabelAlign": null,
                                        "fieldLabel": "Тепломір",
                                        "inputValue": "да",
                                        "labelWidth": 110,
                                        "layout|anchor": "100%",
                                        "name": "teplomer",
                                        "padding": null,
                                        "style": null,
                                        "uncheckedValue": "нет"
                                    },
                                    "name": "MyCheckbox18",
                                    "configAlternates": {
                                        "scrollable": "boolean",
                                        "style": "string"
                                    },
                                    "designerId": "bfd0ce99-fcda-4c88-808c-e574319f1ccd",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onCheckboxfieldChange612",
                                                "implHandler": [
                                                    "if(newValue){",
                                                    "    field.setBoxLabel(\"Так\");",
                                                    "}else{",
                                                    "    field.setBoxLabel(\"Ні\");",
                                                    "}"
                                                ],
                                                "name": "change",
                                                "scope": "me"
                                            },
                                            "name": "onCheckboxfieldChange612",
                                            "designerId": "a9bf55fe-f18f-4ecc-b304-6530a7003072"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.field.Checkbox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": "Ні",
                                        "fieldLabel": "Бойлер",
                                        "inputValue": "да",
                                        "labelWidth": 110,
                                        "layout|anchor": "100%",
                                        "name": "boiler",
                                        "padding": null,
                                        "style": null,
                                        "uncheckedValue": "нет"
                                    },
                                    "name": "MyCheckbox19",
                                    "configAlternates": {
                                        "scrollable": "boolean",
                                        "style": "string"
                                    },
                                    "designerId": "4dad1ff0-2638-4610-895f-78b8157f9a09",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onCheckboxfieldChange212",
                                                "implHandler": [
                                                    "if(newValue){",
                                                    "    field.setBoxLabel(\"Так\");",
                                                    "}else{",
                                                    "    field.setBoxLabel(\"Ні\");",
                                                    "}"
                                                ],
                                                "name": "change",
                                                "scope": "me"
                                            },
                                            "name": "onCheckboxfieldChange212",
                                            "designerId": "4a5ca5d3-f39a-45dd-9227-ca6640f47aec"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.field.Checkbox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": "Ні",
                                        "fieldLabel": "Рушникосушарка",
                                        "inputValue": "1",
                                        "labelWidth": 110,
                                        "layout|anchor": "100%",
                                        "name": "heated",
                                        "padding": null,
                                        "style": null,
                                        "uncheckedValue": "0"
                                    },
                                    "name": "MyCheckbox54",
                                    "configAlternates": {
                                        "scrollable": "boolean",
                                        "style": "string"
                                    },
                                    "designerId": "9fedeaa6-5c04-4fdf-a1b4-65eebeb4ca5d",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onCheckboxfieldChange2111",
                                                "implHandler": [
                                                    "if(newValue){",
                                                    "    field.setBoxLabel(\"Так\");",
                                                    "}else{",
                                                    "    field.setBoxLabel(\"Ні\");",
                                                    "}"
                                                ],
                                                "name": "change",
                                                "scope": "me"
                                            },
                                            "name": "onCheckboxfieldChange2111",
                                            "designerId": "024259ae-e526-4bb6-80e0-32563a7f72fc"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowDecimals": false,
                                        "decimalPrecision": 0,
                                        "fieldLabel": "ДТепломір_ид",
                                        "hideTrigger": true,
                                        "layout|anchor": "100%",
                                        "name": "dteplomer_id",
                                        "padding": null,
                                        "style": null,
                                        "width": 170
                                    },
                                    "name": "MyNumberField190",
                                    "configAlternates": {
                                        "scrollable": "boolean",
                                        "style": "string"
                                    },
                                    "designerId": "e98f412d-4e62-4800-a446-8c753da03730"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Печать расчетки",
                                "disabled": null,
                                "formBind": null,
                                "height": null,
                                "icon": "resources/css/images/ico/printer24.png",
                                "id": "printRaspechatakaYtke",
                                "layout|x": 380,
                                "layout|y": 135,
                                "scale": "medium",
                                "text": "інформаційний листок",
                                "tooltip": "Печать расчетного листка",
                                "width": 185
                            },
                            "name": "MyButton31",
                            "configAlternates": {
                                "tooltip": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "eee11f00-c9d4-4a58-89ae-e64c6a62847e",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "formBind",
                                    "type": "string"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Hidden",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Label",
                        "layout|anchor": null,
                        "name": "address_id"
                    },
                    "name": "MyHiddenField8",
                    "designerId": "a2001be0-5672-4209-94dd-f2be5c798cc6"
                }
            ]
        },
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|snapToGrid": 5,
                "height": null,
                "id": "tabFmAppPtn",
                "itemId": null,
                "layout": "absolute",
                "minHeight": null,
                "title": "ПТН",
                "width": null
            },
            "name": "MyForm37",
            "configAlternates": {
                "scrollable": "boolean"
            },
            "designerId": "1174884f-24d9-48cf-91ec-e138addf04ae",
            "cn": [
                {
                    "type": "Ext.tab.Tab",
                    "reference": {
                        "name": "tabConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "name": "TabConfig3",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "382703f7-f3f7-465b-949c-da554d368983"
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|createAlias": null,
                        "forceFit": null,
                        "height": 490,
                        "id": "grNachPtn",
                        "layout|x": 0,
                        "layout|y": 0,
                        "scrollable": true,
                        "store": "StTekNachApp",
                        "title": "Период начисления",
                        "width": 225
                    },
                    "name": "MyGridPanel10",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "48aac80e-7eda-43d4-80fc-62ee4c876563",
                    "cn": [
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "нет начислений",
                                "height": 438,
                                "style": null
                            },
                            "name": "MyGridView10",
                            "configAlternates": {
                                "style": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "3bcc659b-66e9-4df5-80e3-eea103908894"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "address_id",
                                "hidden": true,
                                "text": "Address_id"
                            },
                            "name": "MyNumberColumn43",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "5280b919-7aa9-44bf-a7d2-a7af5418e46f"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "god",
                                "format": "0",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "год",
                                "width": 50
                            },
                            "name": "MyNumberColumn44",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "5edcad0d-7400-42c6-843c-85c3136e41b0"
                        },
                        {
                            "type": "Ext.grid.column.Date",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "data",
                                "format": "F",
                                "menuDisabled": true,
                                "text": "месяц",
                                "width": 74
                            },
                            "name": "MyDateColumn8",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "81f07717-82c1-4acf-8b15-3b5da95ff2c8"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "zadol",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "задол",
                                "width": 70
                            },
                            "name": "MyColumn42",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "2002b8de-9081-440c-a8b0-b57817075cb1",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "7a2df6e6-e3ea-4517-8e22-df3664b0bb1f"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "mec",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "мес",
                                "width": 49
                            },
                            "name": "MyColumn43",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "766448af-525a-469d-af4a-641eabcf5efa"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "period",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "Период",
                                "width": 62
                            },
                            "name": "MyColumn44",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "bd8f6626-a4b9-4a5e-ba27-6c080386a631"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "nachisleno",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "начисл",
                                "width": 70
                            },
                            "name": "MyColumn45",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "9512f67b-b05a-45c2-a684-b98e0db553b3",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "944f4e82-af5c-4ee7-a6dd-9a1e35f3eb32"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "oplacheno",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "оплач",
                                "width": 70
                            },
                            "name": "MyColumn46",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "b3eef3e9-20e3-4b4f-a7b3-55f7b05c1458",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "c52907a1-fcf5-4123-9c08-3e7c8e093ff6"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "dolg",
                                "flex": null,
                                "menuDisabled": true,
                                "text": "Долг",
                                "width": 80
                            },
                            "name": "MyColumn47",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "41d12312-dcd1-48d4-8358-b3d834f7aa22",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "a5514ff8-f2b7-4e66-a21f-f628dd9534cf"
                                }
                            ]
                        },
                        {
                            "type": "Ext.panel.Tool",
                            "reference": {
                                "name": "tools",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "tooltip": "выбрать все записи",
                                "type": "plus"
                            },
                            "name": "MyTool9",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "fde34f3f-82ac-4402-b65a-e72f7aa0505e",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "owner",
                                            "tool",
                                            "event"
                                        ],
                                        "fn": "callback",
                                        "implHandler": [
                                            "//STORE",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                            "//LOGIN & PASSWORD",
                                            "var values =stUser.getAt(0);",
                                            "// FORM",
                                            "var form = tool.findParentByType('form');",
                                            "// DATA",
                                            "",
                                            "//LOGIKA",
                                            "StTekNachApp.load({",
                                            "    params: {",
                                            "        what:'PtnAppAll',",
                                            "        address_id: values.get('address_id'),",
                                            "        login:values.get('login'),",
                                            "        password:values.get('password')",
                                            "    },",
                                            "    callback: function(records,operation,success){",
                                            "        if(success){",
                                            "            form.getForm().reset();",
                                            "            form.getForm().loadRecord(records[0]);",
                                            "        }else{",
                                            "            form.getForm().reset();",
                                            "        }",
                                            "    },",
                                            "    scope:this",
                                            "});"
                                        ]
                                    },
                                    "name": "callback",
                                    "designerId": "03231508-60db-4203-9fb9-806f6e0d41d8"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "collapsible": null,
                        "forceFit": null,
                        "height": 260,
                        "id": "grLgotaNachPtn",
                        "layout|x": 235,
                        "layout|y": 240,
                        "scrollable": true,
                        "store": "StLgotaNachVoda",
                        "title": "нарахування на бюджет",
                        "width": 825
                    },
                    "name": "MyGridPanel11",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "a05c097d-9315-4944-9947-7f8cc1bad841",
                    "cn": [
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "Начислений по льготе нет",
                                "style": null
                            },
                            "name": "MyGridView11",
                            "configAlternates": {
                                "style": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "11df117c-84d3-465f-b232-aea202d45886"
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Перерасчет",
                                "icon": null,
                                "maxWidth": null,
                                "menuDisabled": true,
                                "minWidth": null,
                                "width": 30
                            },
                            "name": "MyActionColumn8",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "6ebc6454-f442-4afa-803c-93a809198d30",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|displayName": "Добавить перерасчет",
                                        "icon": "resources/css/images/ico/add.png",
                                        "tooltip": "Добавить перерасчет по льготе"
                                    },
                                    "name": "MyActionColumnItem10",
                                    "designerId": "3752130a-f07d-45ea-8a08-df254e508512",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "v",
                                                    "metadata",
                                                    "r",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "store"
                                                ],
                                                "fn": "getClass",
                                                "implHandler": [
                                                    "var pr = r.get('pr');",
                                                    "if (pr === 0 ) {",
                                                    "    metaData = 'x-grid-center-icon';",
                                                    "} else if (pr === 1   ){",
                                                    "    metaData = 'x-hide-display';  ",
                                                    "} ",
                                                    "return metaData;"
                                                ]
                                            },
                                            "name": "getClass",
                                            "designerId": "b46f9b62-d6d0-40a9-9ed8-aebc3c09a7a7"
                                        },
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var dt = new Date();",
                                                    "var winAddLgotaPerer = Ext.ClassManager.instantiateByAlias('widget.winaddlgotaperer');",
                                                    "var form = winAddLgotaPerer.down('#fmAddLgotaPerer');",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var values =stUser.getAt(0);",
                                                    "var value = record;",
                                                    "",
                                                    "view.getSelectionModel().select(rowIndex);",
                                                    "values.set({'vibor':'addLgotaPtnPerer'});",
                                                    "stUser.sync();",
                                                    "form.loadRecord(value);",
                                                    "form.getForm().findField('data').setValue(Ext.Date.format(dt, 'Y-m-d'));",
                                                    "form.getForm().findField('summa').setValue(value.get('budjet'));",
                                                    "form.getForm().findField('m2').hide();",
                                                    "form.getForm().findField('gkm2').hide();",
                                                    "form.getForm().findField('gkal').hide();",
                                                    "",
                                                    "winAddLgotaPerer.show();"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "e1234d20-a408-4757-8c1c-8140e497810a"
                                        }
                                    ]
                                },
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|displayName": "Удалить перерасчет",
                                        "icon": "resources/css/images/ico/delete.png",
                                        "tooltip": "Удалить перерасчет по льготе"
                                    },
                                    "name": "MyActionColumnItem11",
                                    "designerId": "6fa43c21-4ae8-4be1-adb2-f4d8387e8074",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "v",
                                                    "metadata",
                                                    "r",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "store"
                                                ],
                                                "fn": "getClass",
                                                "implHandler": [
                                                    "var tekd = r.get('data');",
                                                    "var dt = new Date();",
                                                    "var check_date=Ext.Date.format(dt, 'Y-m');",
                                                    "var tek_date=Ext.Date.format(tekd, 'Y-m');",
                                                    "var pr = r.get('pr');",
                                                    "",
                                                    "if (pr === 0 ) {",
                                                    "    metaData = 'x-hide-display';",
                                                    "} else if ((pr === 1) && (check_date === tek_date) ){",
                                                    "    metaData = 'x-grid-center-icon';",
                                                    "} ",
                                                    "return metaData;"
                                                ]
                                            },
                                            "name": "getClass",
                                            "designerId": "7da47be9-a0d0-423f-ac74-88248373f256"
                                        },
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "// in use",
                                                    "var me = this;",
                                                    "//STORE",
                                                    "",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                                    "",
                                                    "var form = Ext.getCmp('tabFmAppPtn');",
                                                    "",
                                                    "//LOGIN & PASSWORD",
                                                    "var values =stUser.getAt(0);",
                                                    "var params = {",
                                                    "    login:values.get('login'),",
                                                    "    password:values.get('password'),",
                                                    "    address_id:values.get('address_id'),",
                                                    "    address:values.get('address'),",
                                                    "    what:\"delLgotaPtnPerer\"",
                                                    "};",
                                                    "",
                                                    "//GRID",
                                                    "var store = view.getStore();",
                                                    "var value = store.getAt(rowIndex).data;",
                                                    "// FORM",
                                                    "",
                                                    "//GRID",
                                                    "var grNach = Ext.getCmp('grNachPtn');",
                                                    "var valueNachisl  = grNach.getView().getSelectionModel().getSelection()[0];",
                                                    "var ind  = grNach.getView().getStore().indexOf(valueNachisl);",
                                                    "",
                                                    "//LOGIKA",
                                                    "",
                                                    "",
                                                    "Ext.Object.merge(value, params);",
                                                    "//console.log(value);",
                                                    "",
                                                    "Ext.MessageBox.confirm({",
                                                    "    title: 'Удаление записи из базы льгот',",
                                                    "    msg: 'Вы удаляете перерасчет по птн на бюджет <br> Подтвердите или отмените свои действия.',",
                                                    "    buttons: Ext.MessageBox.OKCANCEL,",
                                                    "    icon: Ext.MessageBox.ERROR,",
                                                    "    buttonText:{",
                                                    "        ok:'подтвеждаю',",
                                                    "        cancel:'отмена'",
                                                    "    },",
                                                    "    fn:function(btn,newValue){",
                                                    "        if(btn=='ok'){",
                                                    "            QueryAddress.updateRecords(value,function(results){",
                                                    "                if(results.success===\"1\"){",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление перерасчета по птн на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.INFO",
                                                    "                    });",
                                                    "                    StTekNachApp.load({",
                                                    "                        params: {",
                                                    "                            what:'PtnApp',",
                                                    "                            address_id: values.get('address_id'),",
                                                    "                            login:values.get('login'),",
                                                    "                            password:values.get('password')",
                                                    "                        },",
                                                    "                        callback: function(records,operation,success){",
                                                    "                            if(success){",
                                                    "                                grNach.getView().getSelectionModel().select(ind);",
                                                    "                            }else{",
                                                    "                                form.getForm().reset();",
                                                    "                            }",
                                                    "                        },",
                                                    "                        scope:this",
                                                    "                    });",
                                                    "",
                                                    "                } else {",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление перерасчета по птн на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.ERROR",
                                                    "                    });",
                                                    "                }",
                                                    "            });",
                                                    "        }",
                                                    "    }",
                                                    "});"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "81d4a22b-9bfb-4999-93f3-485b38609561"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Date",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "sdata",
                                "format": "d-m-y",
                                "menuDisabled": true,
                                "text": "дата с",
                                "width": 75
                            },
                            "name": "MyDateColumn9",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "28049020-4f22-4482-9eea-ec413f2c7fd2"
                        },
                        {
                            "type": "Ext.grid.column.Date",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "fdata",
                                "format": "d-m-y",
                                "menuDisabled": true,
                                "text": "дата по",
                                "width": 75
                            },
                            "name": "MyDateColumn10",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "f2a44d79-62a2-4336-abd4-ac3032d315c2"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "fio",
                                "menuDisabled": true,
                                "text": "Ф.И.О",
                                "width": 120
                            },
                            "name": "MyColumn48",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "dde6f60f-c38f-4f99-91c6-eb039dfaf544"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "lgota",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "Льгота",
                                "tooltip": "name",
                                "width": 130
                            },
                            "name": "MyColumn49",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "4044f4f0-6517-4e50-b252-9c8b7bb515ee"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "center",
                                "dataIndex": "percent",
                                "format": "0",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "%",
                                "width": 35
                            },
                            "name": "MyNumberColumn45",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "9510c69c-3f1a-4313-9f5a-c84e588802f2"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "center",
                                "dataIndex": "people",
                                "format": "0",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "чел",
                                "width": 44
                            },
                            "name": "MyNumberColumn46",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "23496e34-d9a8-446e-a7c0-9f208dc36d19"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "tarif",
                                "format": "0.000",
                                "menuDisabled": true,
                                "summaryType": null,
                                "text": "тариф",
                                "width": 81
                            },
                            "name": "MyNumberColumn47",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "8db92553-637e-453b-a5d3-2b5480fed846"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "qty",
                                "format": "0.000",
                                "menuDisabled": true,
                                "summaryType": "sum",
                                "text": "S (м&sup2;)",
                                "width": 74
                            },
                            "name": "MyNumberColumn48",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "b89442c5-cd26-4206-9ff5-8a19ee57b7ef"
                        },
                        {
                            "type": "Ext.grid.feature.Summary",
                            "reference": {
                                "name": "features",
                                "type": "array"
                            },
                            "codeClass": null,
                            "name": "MySummaryFeature2",
                            "designerId": "c819fbf5-8c69-48b7-b318-d47362bab006"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "budjet",
                                "menuDisabled": true,
                                "summaryType": "sum",
                                "text": "бюджет",
                                "width": 74
                            },
                            "name": "MyNumberColumn49",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "05b8e157-3378-43e9-9d89-9c79f5a9249f"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "pr",
                                "format": "0",
                                "menuDisabled": true,
                                "text": "пр",
                                "width": 40
                            },
                            "name": "MyNumberColumn50",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "208c80f5-6763-4e57-9a17-c74d7e84c3d2"
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Редактировать запись",
                                "flex": null,
                                "maxWidth": null,
                                "menuDisabled": true,
                                "minWidth": null,
                                "width": 30
                            },
                            "name": "MyActionColumn9",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "f22cb35a-2b54-4068-bb2c-2e74c3b655f9",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "icon": "resources/css/images/ico/edit.png",
                                        "tooltip": "Редактировать запись"
                                    },
                                    "name": "MyActionColumnItem12",
                                    "designerId": "c703f61d-6c88-4260-b299-d202c8a80e34",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var dt = new Date();",
                                                    "var winAddLgotaPerer = Ext.ClassManager.instantiateByAlias('widget.winaddlgotaperer');",
                                                    "var form = winAddLgotaPerer.down('#fmAddLgotaPerer');",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var values =stUser.getAt(0);",
                                                    "var value = record;",
                                                    "",
                                                    "view.getSelectionModel().select(rowIndex);",
                                                    "values.set({'vibor':'editLgotaPtn'});",
                                                    "stUser.sync();",
                                                    "",
                                                    "form.down('#btAddLgotaPerer').setText('Обновить запись');",
                                                    "form.loadRecord(value);",
                                                    "form.getForm().findField('summa').setValue(value.get('budjet'));",
                                                    "form.getForm().findField('m2').hide();",
                                                    "form.getForm().findField('gkm2').hide();",
                                                    "form.getForm().findField('gkal').hide();",
                                                    "",
                                                    "winAddLgotaPerer.setTitle('Редактирование записи на бюджет');",
                                                    "",
                                                    "winAddLgotaPerer.show();"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "3469ff56-5b32-4b67-b296-f034de5a8bb2"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Удалить запись",
                                "flex": null,
                                "maxWidth": null,
                                "menuDisabled": true,
                                "minWidth": null,
                                "width": 30
                            },
                            "name": "MyActionColumn10",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "0cee202a-705a-4bf5-b9fd-5140d820c990",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "icon": "resources/css/images/ico/no.png",
                                        "tooltip": "Удалить  запись "
                                    },
                                    "name": "MyActionColumnItem13",
                                    "designerId": "e7f1563c-4466-46c6-b4ba-6b88a3d85872",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "v",
                                                    "metadata",
                                                    "r",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "store"
                                                ],
                                                "fn": "getClass",
                                                "implHandler": [
                                                    "var tekd = r.get('data');",
                                                    "var dt = new Date();",
                                                    "var check_date=Ext.Date.format(dt, 'Y-m');",
                                                    "var tek_date=Ext.Date.format(tekd, 'Y-m');",
                                                    "var pr = r.get('pr');",
                                                    "if (pr === 1 ) {",
                                                    "    metaData = 'x-hide-display';",
                                                    "} else if ( (pr === 0)  ){",
                                                    "    metaData = 'x-grid-center-icon';",
                                                    "} ",
                                                    "return metaData;"
                                                ]
                                            },
                                            "name": "getClass",
                                            "designerId": "65048728-8407-433f-ac0e-077c9a150ef1"
                                        },
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "// in use",
                                                    "var me = this;",
                                                    "//STORE",
                                                    "",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                                    "",
                                                    "var form = Ext.getCmp('tabFmAppPtn');",
                                                    "",
                                                    "//LOGIN & PASSWORD",
                                                    "var values =stUser.getAt(0);",
                                                    "var params = {",
                                                    "    login:values.get('login'),",
                                                    "    password:values.get('password'),",
                                                    "    address_id:values.get('address_id'),",
                                                    "    address:values.get('address'),",
                                                    "    what:\"delLgotaPtn\"",
                                                    "};",
                                                    "",
                                                    "//GRID",
                                                    "var store = view.getStore();",
                                                    "var value = store.getAt(rowIndex).data;",
                                                    "// FORM",
                                                    "",
                                                    "//GRID",
                                                    "var grNach = Ext.getCmp('grNachPtn');",
                                                    "var valueNachisl  = grNach.getView().getSelectionModel().getSelection()[0];",
                                                    "var ind  = grNach.getView().getStore().indexOf(valueNachisl);",
                                                    "",
                                                    "//LOGIKA",
                                                    "",
                                                    "",
                                                    "Ext.Object.merge(value, params);",
                                                    "//console.log(value);",
                                                    "",
                                                    "Ext.MessageBox.confirm({",
                                                    "    title: 'Удаление записи из базы льгот',",
                                                    "    msg: 'Вы удаляете начисление на бюджет <br> Подтвердите или отмените свои действия.',",
                                                    "    buttons: Ext.MessageBox.OKCANCEL,",
                                                    "    icon: Ext.MessageBox.ERROR,",
                                                    "    buttonText:{",
                                                    "        ok:'подтвеждаю',",
                                                    "        cancel:'отмена'",
                                                    "    },",
                                                    "    fn:function(btn,newValue){",
                                                    "        if(btn=='ok'){",
                                                    "            QueryAddress.updateRecords(value,function(results){",
                                                    "                if(results.success===\"1\"){",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление начисления по птн на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.INFO",
                                                    "                    });",
                                                    "                    StTekNachApp.load({",
                                                    "                        params: {",
                                                    "                            what:'PtnApp',",
                                                    "                            address_id: values.get('address_id'),",
                                                    "                            login:values.get('login'),",
                                                    "                            password:values.get('password')",
                                                    "                        },",
                                                    "                        callback: function(records,operation,success){",
                                                    "                            if(success){",
                                                    "                                grNach.getView().getSelectionModel().select(ind);",
                                                    "                            }else{",
                                                    "                                form.getForm().reset();",
                                                    "                            }",
                                                    "                        },",
                                                    "                        scope:this",
                                                    "                    });",
                                                    "",
                                                    "                } else {",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление начисления  на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.ERROR",
                                                    "                    });",
                                                    "                }",
                                                    "            });",
                                                    "        }",
                                                    "    }",
                                                    "});"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "ecab186a-920a-4eb8-8d6b-961617a1881f"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "info",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "инфо",
                                "tooltip": "name",
                                "width": null
                            },
                            "name": "MyColumn50",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "a1f4ac6e-32c1-42a8-9532-5aba74d6860d"
                        },
                        {
                            "type": "Ext.panel.Tool",
                            "reference": {
                                "name": "tools",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "tooltip": "добавить начисление по льготнику",
                                "type": "plus"
                            },
                            "name": "MyTool10",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "326a0523-bbf8-4d37-818d-7b62de47a5f9",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "owner",
                                            "tool",
                                            "event"
                                        ],
                                        "fn": "callback",
                                        "implHandler": [
                                            "var gridLgotnik = Ext.getCmp('grLgotnikNachApp');",
                                            "var gridNachisl = Ext.getCmp('grNachPtn');",
                                            "",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var values =stUser.getAt(0);",
                                            "",
                                            "var value  = gridLgotnik.getView().getSelectionModel().getSelection()[0];",
                                            "var valueNachisl  = gridNachisl.getView().getSelectionModel().getSelection()[0];",
                                            "var ind  = gridNachisl.getView().getStore().indexOf(valueNachisl);",
                                            "",
                                            "if (value !==undefined && valueNachisl !==undefined ){",
                                            "    var winAddLgotaPerer = Ext.ClassManager.instantiateByAlias('widget.winaddlgotaperer');",
                                            "    var form = winAddLgotaPerer.down('#fmAddLgotaPerer');",
                                            "    var dt = new Date();",
                                            "    var dt_nach = new Date(valueNachisl.get('data'));",
                                            "    var check_date = Ext.Date.format(dt, 'Y-m');",
                                            "    var date_check = Ext.Date.format(dt_nach, 'Y-m');",
                                            "    form.getForm().findField('m2').hide();",
                                            "    form.getForm().findField('gkm2').hide();",
                                            "    form.getForm().findField('gkal').hide();",
                                            "",
                                            "    winAddLgotaPerer.setTitle('Добавление записи на бюджет');",
                                            "",
                                            "   var pr = form.getForm().findField('checkType').getValue();",
                                            "    //console.log(pr);",
                                            "",
                                            "         if (pr === true ) {",
                                            "",
                                            "        values.set({'vibor':'addLgotaPtn'});",
                                            "        stUser.sync();",
                                            "        form.loadRecord(value);",
                                            "        form.getForm().findField('data').setValue(Ext.Date.format(dt, 'Y-m-d'));",
                                            "        form.getForm().findField('sdata').setValue(Ext.Date.getFirstDateOfMonth(dt) );",
                                            "        form.getForm().findField('fdata').setValue(Ext.Date.getLastDateOfMonth(dt) );",
                                            "        form.getForm().findField('tarif').setValue(valueNachisl.get('tarif_m2'));",
                                            "        form.getForm().findField('qty').setValue(valueNachisl.get('square_lg'));",
                                            "        form.getForm().findField('summa').setValue(valueNachisl.get('budjet'));",
                                            "        form.getForm().findField('checkType').setValue(\"0\");",
                                            "        form.getForm().findField('info').setValue('Добавление записи начисления на бюджет в ручном режиме');",
                                            "        form.getForm().findField('ind').setValue(ind);",
                                            "        winAddLgotaPerer.show();",
                                            "",
                                            "    } else {",
                                            "",
                                            "        values.set({'vibor':'addLgotaPtnPerer'});",
                                            "        stUser.sync();",
                                            "        form.loadRecord(value);",
                                            "        form.getForm().findField('data').setValue(Ext.Date.format(dt, 'Y-m-d'));",
                                            "        form.getForm().findField('sdata').setValue(Ext.Date.getFirstDateOfMonth(dt_nach) );",
                                            "        form.getForm().findField('fdata').setValue(Ext.Date.getLastDateOfMonth(dt_nach) );",
                                            "        form.getForm().findField('tarif').setValue(valueNachisl.get('tarif_m2'));",
                                            "        form.getForm().findField('qty').setValue(valueNachisl.get('square_lg'));",
                                            "        form.getForm().findField('summa').setValue(valueNachisl.get('budjet'));",
                                            "        form.getForm().findField('checkType').setValue(\"1\");",
                                            "        form.getForm().findField('info').setValue('Добавление записи перерасчета на бюджет в ручном режиме');",
                                            "        form.getForm().findField('ind').setValue(ind);",
                                            "        winAddLgotaPerer.show();",
                                            "",
                                            "    }",
                                            "",
                                            "",
                                            "} else{",
                                            "    Ext.MessageBox.show({",
                                            "        title: 'Добавлениезаписи начисления  на бюджет',",
                                            "        msg: 'Не выбран льготчик',",
                                            "        buttons: Ext.MessageBox.OK,",
                                            "        icon: Ext.MessageBox.INFO",
                                            "    });",
                                            "}"
                                        ]
                                    },
                                    "name": "callback",
                                    "designerId": "d52675cc-167b-4a8e-8658-695cb31364ad"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Date",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": "0px",
                        "fieldLabel": "Период начислен",
                        "fieldStyle": "color: #1791e6; text-shadow: -1px -1px white, 1px 1px #333;font-size:14pt;text-align:center",
                        "format": "F,Y",
                        "hideLabel": true,
                        "hideTrigger": true,
                        "id": null,
                        "labelAlign": "top",
                        "labelWidth": 50,
                        "layout|x": 240,
                        "layout|y": 0,
                        "margin": "10 0 10 0",
                        "name": "data",
                        "startDay": 1,
                        "submitFormat": "Ymd",
                        "width": 150
                    },
                    "name": "MyDateField10",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "ac3db694-0f7f-4124-9c9e-8f79bcbfc644"
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 175,
                        "layout|x": 240,
                        "layout|y": 45,
                        "style": "background-color: #DCDCDC;",
                        "title": "Сальдо",
                        "width": 150
                    },
                    "name": "MyFieldSet22",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "e6cc6823-ff83-43dd-9f1d-a9fe787f0420",
                    "cn": [
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Сальдо на початок",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelAlign": "top",
                                "labelWidth": 55,
                                "layout|anchor": "100%",
                                "name": "zadol",
                                "value": [
                                    "0"
                                ],
                                "width": 119
                            },
                            "name": "MyNumberField243",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "9acd604a-ae7c-464f-ba86-ded8660f9b46"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Сальдо на конец",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelAlign": "top",
                                "labelWidth": 55,
                                "layout|anchor": "100%",
                                "name": "dolg",
                                "value": [
                                    "0"
                                ],
                                "width": 119
                            },
                            "name": "MyNumberField244",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "9756c861-d3a9-42f1-8913-dccb60448836"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "formBind": true,
                                "height": 30,
                                "icon": "resources/css/images/ico/yes22.png",
                                "id": "btnPtnAppIns",
                                "itemId": null,
                                "layout|anchor": "100%",
                                "margin": "10 0 0 0",
                                "text": "Записати",
                                "width": 90
                            },
                            "name": "MyButton23",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "98ef528b-5a15-4a9b-8770-eb0d40e1aa08",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "// in use",
                                            "var me = this;",
                                            "",
                                            "//STORE",
                                            "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var values =stUser.getAt(0);",
                                            "var params = {",
                                            "    login:values.get('login'),",
                                            "    password:values.get('password'),",
                                            "    address_id:values.get('address_id'),",
                                            "    what:'AppPtnIns'",
                                            "};",
                                            "//FORMA",
                                            "var form = button.findParentByType('form').getForm();",
                                            "var value = form.getValues();",
                                            "var grNach = Ext.getCmp('grNachPtn');",
                                            "var record = grNach.getSelectionModel().getSelection()[0];",
                                            "var ind  = grNach.getView().getStore().indexOf(record);",
                                            "//LOGIKA",
                                            "Ext.Object.merge(value, params);",
                                            "",
                                            "QueryAddress.updateRecords(value,function(results){",
                                            "",
                                            "    StTekNachApp.load({",
                                            "        params: {",
                                            "            what:'PtnApp',",
                                            "            address_id: values.get('address_id'),",
                                            "            login:values.get('login'),",
                                            "            password:values.get('password')",
                                            "        },",
                                            "        callback: function(records,operation,success){",
                                            "            if(success){",
                                            "                grNach.getView().getSelectionModel().select(ind);",
                                            "            }else{",
                                            "                form.reset();",
                                            "            }",
                                            "        },",
                                            "        scope:this",
                                            "    });",
                                            "});",
                                            ""
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "e69a3cba-8f66-4f83-8a0b-83778fd41504"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|snapToGrid": 5,
                        "height": 225,
                        "layout": "absolute",
                        "layout|x": 400,
                        "layout|y": 5,
                        "style": "background-color: #DCDCDC;",
                        "title": "Начислено, грн",
                        "width": 660
                    },
                    "name": "MyFieldSet23",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "5a8bc534-bcd8-4215-8a65-934d4e8bcd90",
                    "cn": [
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "тариф",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "name": "tarif",
                                "value": [
                                    "0"
                                ],
                                "width": 195
                            },
                            "name": "MyNumberField269",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "d0b2f2a3-ced1-422b-95f5-172d8e4e5d94"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 4,
                                "fieldLabel": "тариф  (м&sup2;)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "layout|x": 0,
                                "layout|y": 30,
                                "name": "tarif_m2",
                                "value": [
                                    "0"
                                ],
                                "width": 195
                            },
                            "name": "MyNumberField5",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "809fa45b-5568-444f-9a3a-8512cbbf855b"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Площадь (м&sup2;)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "layout|x": 0,
                                "layout|y": 60,
                                "name": "square",
                                "value": [
                                    "0"
                                ],
                                "width": 195
                            },
                            "name": "MyNumberField245",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "955c7cdd-11b7-4e4b-849e-04d1a04f9f32"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 6,
                                "fieldLabel": "Q квартиры",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "layout|x": 0,
                                "layout|y": 120,
                                "name": "gkal",
                                "value": [
                                    "0"
                                ],
                                "width": 230
                            },
                            "name": "MyNumberField6",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "90828f80-a5e3-4114-ac36-8e6d358b035f"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Начислено",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 70,
                                "layout|x": 475,
                                "layout|y": 35,
                                "name": "nachisleno",
                                "value": [
                                    "0"
                                ],
                                "width": 155
                            },
                            "name": "MyNumberField249",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "5663f520-09b7-40ef-8ade-d993b976b2d8"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Оплачено",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 70,
                                "layout|x": 475,
                                "layout|y": 65,
                                "name": "oplacheno",
                                "value": [
                                    "0"
                                ],
                                "width": 155
                            },
                            "name": "MyNumberField250",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "7a85fc52-6363-4c84-91b2-ebefecf9c9b6"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 13,
                                "fieldLabel": "Гкал/час (м&sup2;)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "layout|x": 0,
                                "layout|y": 90,
                                "name": "gkm2",
                                "value": [
                                    "0"
                                ],
                                "width": 230
                            },
                            "name": "MyNumberField251",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "1457031d-9cb4-4fca-adb1-0fbe55aeab37"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "П.Т.Н.",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "layout|x": 0,
                                "layout|y": 150,
                                "name": "ptn",
                                "value": [
                                    "0"
                                ],
                                "width": 195
                            },
                            "name": "MyNumberField252",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "0a181237-2f4c-4789-bab0-96f2cff8ace2"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Перер",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 75,
                                "layout|x": 470,
                                "layout|y": 5,
                                "name": "perer",
                                "value": [
                                    "0"
                                ],
                                "width": 160
                            },
                            "name": "MyNumberField253",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "89ada15c-d895-4514-be74-2bc672daf314"
                        },
                        {
                            "type": "Ext.form.FieldSet",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "height": 115,
                                "layout|x": 245,
                                "layout|y": 0,
                                "style": "background-color: #f1eeee;",
                                "title": "Бюджет",
                                "width": 185
                            },
                            "name": "MyFieldSet24",
                            "configAlternates": {
                                "style": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "1e88e065-bf67-4e24-9553-df6f86e253c6",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "autoStripChars": true,
                                        "decimalPrecision": 0,
                                        "fieldLabel": "Sльг (м&sup2;)",
                                        "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                        "hideLabel": null,
                                        "hideTrigger": true,
                                        "labelWidth": 80,
                                        "layout|anchor": "100%",
                                        "name": "square_lg",
                                        "value": [
                                            "0"
                                        ],
                                        "width": 124
                                    },
                                    "name": "MyNumberField254",
                                    "configAlternates": {
                                        "scrollable": "boolean"
                                    },
                                    "designerId": "57c6282c-1088-4f68-81d9-39983dee659b"
                                },
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "autoStripChars": true,
                                        "fieldLabel": "Бюджет",
                                        "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                        "hideLabel": null,
                                        "hideTrigger": true,
                                        "labelWidth": 80,
                                        "layout|anchor": "100%",
                                        "name": "budjet",
                                        "value": [
                                            "0"
                                        ],
                                        "width": 125
                                    },
                                    "name": "MyNumberField255",
                                    "configAlternates": {
                                        "scrollable": "boolean"
                                    },
                                    "designerId": "6ea2d9a4-3a5a-4ca0-b853-3bdf54675464"
                                },
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "autoStripChars": true,
                                        "fieldLabel": "Перер",
                                        "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                        "hideLabel": null,
                                        "hideTrigger": true,
                                        "labelWidth": 80,
                                        "layout|anchor": "100%",
                                        "name": "pbudjet",
                                        "value": [
                                            "0"
                                        ],
                                        "width": 125
                                    },
                                    "name": "MyNumberField257",
                                    "configAlternates": {
                                        "scrollable": "boolean"
                                    },
                                    "designerId": "4632e5ba-d3ec-433b-9cd7-1db4b62b4add"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "инфо перер",
                                "fieldStyle": "background-color:#F0F8FF;",
                                "layout|x": 250,
                                "layout|y": 170,
                                "name": "info",
                                "width": 380
                            },
                            "name": "MyTextField44",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "8cd27e5c-4c7d-4234-ac38-34fd56fa024f"
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "инфо бюджет",
                                "fieldStyle": "background-color:#F0F8FF;",
                                "layout|x": 250,
                                "layout|y": 140,
                                "name": "msq_lgota",
                                "width": 380
                            },
                            "name": "MyTextField45",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "846e0c26-c90c-492e-84f9-dd31a7f114ac"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "formBind": true,
                                "height": 30,
                                "icon": "resources/css/images/ico/refresh.png",
                                "id": "btnaAppPtnReset",
                                "itemId": null,
                                "layout|x": 515,
                                "layout|y": 100,
                                "scale": "medium",
                                "text": "",
                                "tooltip": "Восстановить",
                                "width": 30
                            },
                            "name": "MyButton25",
                            "configAlternates": {
                                "tooltip": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "6dd77470-2f6b-4a99-aacb-180a1612ca7f",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "var form = button.findParentByType('form').getForm();",
                                            "var grNach = Ext.getCmp('grNachPtn');",
                                            "var record = grNach.getSelectionModel().getSelection()[0];",
                                            "var ind  = grNach.getView().getStore().indexOf(record);",
                                            "grNach.getView().getSelectionModel().clearSelections();",
                                            "grNach.getView().getSelectionModel().select(ind);"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "b71af8b3-e3a2-4b7d-964c-c9e61de29d5e"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "formBind": true,
                                "height": 30,
                                "icon": "resources/css/images/ico/schet.png",
                                "id": "btnPtnAppPerer",
                                "itemId": null,
                                "layout|x": 575,
                                "layout|y": 100,
                                "scale": "medium",
                                "text": "",
                                "tooltip": "Просчитать",
                                "width": 30
                            },
                            "name": "MyButton26",
                            "configAlternates": {
                                "tooltip": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "0139c91d-107c-42f2-822d-f8a046ba034b",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "//this.up('#winAddVodomer').close();",
                                            "var form = button.findParentByType('form').getForm();",
                                            "//form.reset();",
                                            "var zadol = form.findField('zadol').getValue();",
                                            "var tarif = form.findField('tarif').getValue();",
                                            "var gkm2 = form.findField('gkm2').getValue();",
                                            "var square = form.findField('square').getValue();",
                                            "var perer = form.findField('perer').getValue();",
                                            "var budjet = form.findField('budjet').getValue();",
                                            "var pbudjet = form.findField('pbudjet').getValue();",
                                            "var oplacheno = form.findField('oplacheno').getValue();",
                                            "",
                                            "var nachisleno =0;",
                                            "var ptn = 0;",
                                            "var tarif_m2 = 0;",
                                            "",
                                            "if ((tarif===0)  &&  (square > 0 || gkm2 > 0)) {",
                                            "    Ext.MessageBox.show({",
                                            "        title: 'Проверка тарифа',",
                                            "        msg: 'Введите тариф по услуге',",
                                            "        buttons: Ext.MessageBox.OK,",
                                            "        icon: Ext.MessageBox.INFO",
                                            "    });",
                                            "} else {",
                                            "    ptn = gkm2 * tarif * square ;",
                                            "    tarif_m2 = gkm2 * tarif ;",
                                            "",
                                            "    nachisleno = ptn + perer- budjet + pbudjet;",
                                            "    form.findField('ptn').setValue(ptn);",
                                            "    form.findField('tarif_m2').setValue(tarif_m2);",
                                            "    form.findField('nachisleno').setValue(nachisleno);",
                                            "    form.findField('dolg').setValue(zadol + nachisleno - oplacheno);",
                                            "}"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "ad0aff4c-b1f7-480a-9a90-94348caca19b"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|snapToGrid": 5,
                "height": null,
                "id": "tabFmAppOtoplenie",
                "itemId": null,
                "layout": "absolute",
                "minHeight": null,
                "title": "Опалення",
                "width": 1096
            },
            "name": "MyForm9",
            "configAlternates": {
                "scrollable": "boolean"
            },
            "designerId": "ceaa3a0a-c395-4a50-8931-7d9651d0be81",
            "cn": [
                {
                    "type": "Ext.tab.Tab",
                    "reference": {
                        "name": "tabConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "name": "TabConfig4",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "af2c6063-d641-4238-891b-dbd933d12f75"
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 320,
                        "layout|x": 365,
                        "layout|y": 10,
                        "style": "background-color: #DCDCDC;",
                        "title": "Начислено, грн",
                        "width": 195
                    },
                    "name": "MyFieldSet25",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "9e104e49-b4f3-4f50-a08e-ec86f5b0bc06",
                    "cn": [
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "метод",
                                "labelWidth": 50,
                                "layout|anchor": "100%",
                                "name": "metod"
                            },
                            "name": "MyTextField117",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "49350e9e-1cb5-435b-8555-f2bf0a9cb6ec"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 3,
                                "fieldLabel": "тариф   (м&sup2;)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 90,
                                "layout|anchor": "100%",
                                "name": "tarif",
                                "value": [
                                    "0"
                                ],
                                "width": 135
                            },
                            "name": "MyNumberField271",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "8a7edb75-b6fe-4eec-883d-9496789dc5a3"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Площадь (м&sup2;)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 90,
                                "layout|anchor": "100%",
                                "name": "square",
                                "value": [
                                    "0"
                                ],
                                "width": 133
                            },
                            "name": "MyNumberField157",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "fb304db3-0878-4c02-b02b-7609c130081c"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 7,
                                "fieldLabel": "Гкал (м&sup2;)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 90,
                                "layout|anchor": "100%",
                                "name": "gkalm2",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "b3af01cd-5daa-40ae-899a-c1e063556bd0"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Начисл (м&sup2;)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 90,
                                "layout|anchor": "100%",
                                "name": "otoplenie",
                                "value": [
                                    "0"
                                ],
                                "width": 136
                            },
                            "name": "MyNumberField158",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "df25cb40-fc7e-44dc-adac-4bd0014f3bae"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 3,
                                "fieldLabel": "тариф (гкал)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 90,
                                "layout|anchor": "100%",
                                "name": "tarif_gkal",
                                "value": [
                                    "0"
                                ],
                                "width": 135
                            },
                            "name": "MyNumberField156",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "32f30f63-c24a-4dee-93ff-470dd2b46fb8"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Начисл (гкал)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 90,
                                "layout|anchor": "100%",
                                "name": "otoplenie_gkal",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField159",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "dfb1fc07-47e4-4d78-ba51-4360cdf02d44"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 7,
                                "fieldLabel": "Гкал /м&sup2;",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 90,
                                "layout|anchor": "100%",
                                "name": "gkm2",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField160",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "c9f0cf47-8dc3-4cea-b50d-53149a57825d"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 6,
                                "fieldLabel": "Гкал",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 90,
                                "layout|anchor": "100%",
                                "name": "gkal",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField162",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "c7d8fe4a-b708-4fc1-af44-59900d1c762d"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Начислено",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 90,
                                "layout|anchor": "100%",
                                "name": "nachisleno",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField161",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "17ac6ed3-1a05-49f5-bb8e-c31bd2b9999e"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|createAlias": null,
                        "forceFit": null,
                        "height": 330,
                        "id": "grNachOtoplenie",
                        "layout|x": 0,
                        "layout|y": 0,
                        "scrollable": true,
                        "store": "StTekNachApp",
                        "title": "Период начисления",
                        "width": 210
                    },
                    "name": "MyGridPanel12",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "20fd8391-4f68-4d6a-96c9-5a68b5dcce5e",
                    "cn": [
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "нет начислений",
                                "height": 458,
                                "style": null
                            },
                            "name": "MyGridView12",
                            "configAlternates": {
                                "style": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "8029f840-5e9f-467c-b01c-28c8b36f64b9"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "address_id",
                                "hidden": true,
                                "text": "Address_id"
                            },
                            "name": "MyNumberColumn51",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "4bba1f00-46b0-44a4-ac9d-94a0fd9c94ce"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "god",
                                "format": "0",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "год",
                                "width": 50
                            },
                            "name": "MyNumberColumn52",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "c6e9a60b-cda1-46dc-8313-d2ad8f167bdf"
                        },
                        {
                            "type": "Ext.grid.column.Date",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "data",
                                "format": "F",
                                "menuDisabled": true,
                                "text": "месяц",
                                "width": 75
                            },
                            "name": "MyDateColumn11",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "87e83111-1c44-4bd6-8e1d-b3d6224a5edc"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "zadol",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "задол",
                                "width": 70
                            },
                            "name": "MyColumn51",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "cb312f15-bf18-48f9-8199-dc71a3bb7d95",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "8bf4b059-5c35-4bea-aab5-ac3b6c397446"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "mec",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "мес",
                                "width": 49
                            },
                            "name": "MyColumn52",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "e3a3039f-8b12-4473-b922-1e0a3169efeb"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "period",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "Период",
                                "width": 62
                            },
                            "name": "MyColumn53",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "bda7690b-6567-4148-8091-696bb482b1bd"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "nachisleno",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "начисл",
                                "width": 70
                            },
                            "name": "MyColumn54",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "7f514ada-ea88-4555-831d-2a50e077d4d4",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "6b8adb28-01d1-4a12-9236-d0c1d49f9d9f"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "oplacheno",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "оплач",
                                "width": 70
                            },
                            "name": "MyColumn55",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "21d803c5-7044-4dec-b01a-e66cbb814afc",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "2863e3b2-4846-4732-af5c-90c950b58fe9"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "dolg",
                                "flex": null,
                                "menuDisabled": true,
                                "text": "Долг",
                                "width": 75
                            },
                            "name": "MyColumn56",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "5968cf68-a4fd-49b0-ba33-bf069c8c5fd4",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "62e76168-20e7-41c2-b0aa-7d28e8e2ec9c"
                                }
                            ]
                        },
                        {
                            "type": "Ext.panel.Tool",
                            "reference": {
                                "name": "tools",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "tooltip": "выбрать все записи",
                                "type": "plus"
                            },
                            "name": "MyTool11",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "aee6f465-5b11-4add-9703-d1caad8e6ca4",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "owner",
                                            "tool",
                                            "event"
                                        ],
                                        "fn": "callback",
                                        "implHandler": [
                                            "//STORE",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                            "//LOGIN & PASSWORD",
                                            "var values =stUser.getAt(0);",
                                            "// FORM",
                                            "var form = tool.findParentByType('form');",
                                            "// DATA",
                                            "",
                                            "//LOGIKA",
                                            "StTekNachApp.load({",
                                            "    params: {",
                                            "        what:'OtoplenieAppAll',",
                                            "        address_id: values.get('address_id'),",
                                            "        login:values.get('login'),",
                                            "        password:values.get('password')",
                                            "    },",
                                            "    callback: function(records,operation,success){",
                                            "        if(success){",
                                            "            form.getForm().reset();",
                                            "            form.getForm().loadRecord(records[0]);",
                                            "        }else{",
                                            "            form.getForm().reset();",
                                            "        }",
                                            "    },",
                                            "    scope:this",
                                            "});"
                                        ]
                                    },
                                    "name": "callback",
                                    "designerId": "ab8d7ecc-c912-4517-af23-00821e0c8ba9"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "collapsible": null,
                        "forceFit": null,
                        "height": 185,
                        "id": "grLgotaNachOtoplenie",
                        "layout|x": 5,
                        "layout|y": 340,
                        "scrollable": true,
                        "store": "StLgotaNachVoda",
                        "title": "нарахування на бюджет",
                        "width": 1095
                    },
                    "name": "MyGridPanel13",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "79d14681-c967-4b78-9828-db8680f887da",
                    "cn": [
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "Начислений по льготе нет",
                                "style": null
                            },
                            "name": "MyGridView13",
                            "configAlternates": {
                                "style": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "a02dd271-0013-44ba-9a06-5211278181b2"
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Перерасчет",
                                "icon": null,
                                "maxWidth": null,
                                "menuDisabled": true,
                                "minWidth": null,
                                "width": 30
                            },
                            "name": "MyActionColumn11",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "7b969b77-88b3-49fd-9539-c213136f064c",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|displayName": "Добавить перерасчет",
                                        "icon": "resources/css/images/ico/add.png",
                                        "tooltip": "Добавить перерасчет по льготе"
                                    },
                                    "name": "MyActionColumnItem14",
                                    "designerId": "1fb44b9a-0677-4c53-b7d3-9fd8edac062c",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "v",
                                                    "metadata",
                                                    "r",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "store"
                                                ],
                                                "fn": "getClass",
                                                "implHandler": [
                                                    "var tekd = r.get('data');",
                                                    "var dt = new Date();",
                                                    "var check_date=Ext.Date.format(dt, 'Y-m');",
                                                    "var tek_date=Ext.Date.format(tekd, 'Y-m');",
                                                    "var pr = r.get('pr');",
                                                    "",
                                                    "if (pr === 0 ) {",
                                                    "    metaData = 'x-grid-center-icon';",
                                                    "} else if (pr === 1 ){",
                                                    "    metaData = 'x-hide-display';  ",
                                                    "} ",
                                                    "return metaData;"
                                                ]
                                            },
                                            "name": "getClass",
                                            "designerId": "42202f0a-feec-4057-8593-71b4cbd3109a"
                                        },
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var dt = new Date();",
                                                    "var winAddLgotaPerer = Ext.ClassManager.instantiateByAlias('widget.winaddlgotaperer');",
                                                    "var form = winAddLgotaPerer.down('#fmAddLgotaPerer');",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var values =stUser.getAt(0);",
                                                    "var value = record;",
                                                    "var rbgTypeNachVoda = winAddLgotaPerer.down('#rbgTypeNachVoda');",
                                                    "rbgTypeNachVoda.hide();",
                                                    "view.getSelectionModel().select(rowIndex);",
                                                    "values.set({'vibor':'addLgotaOtopleniePerer'});",
                                                    "stUser.sync();",
                                                    "form.loadRecord(value);",
                                                    "form.getForm().findField('summa').setValue(value.get('budjet'));",
                                                    "form.getForm().findField('data').setValue(Ext.Date.format(dt, 'Y-m-d'));",
                                                    "winAddLgotaPerer.show();"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "9e77854e-1785-4a92-8a00-1bfd95341d8f"
                                        }
                                    ]
                                },
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|displayName": "Удалить перерасчет",
                                        "icon": "resources/css/images/ico/delete.png",
                                        "tooltip": "Удалить перерасчет по льготе"
                                    },
                                    "name": "MyActionColumnItem15",
                                    "designerId": "4e3dead7-b91f-4e0b-8c2f-218c18d4dda5",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "v",
                                                    "metadata",
                                                    "r",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "store"
                                                ],
                                                "fn": "getClass",
                                                "implHandler": [
                                                    "var tekd = r.get('data');",
                                                    "var dt = new Date();",
                                                    "var check_date=Ext.Date.format(dt, 'Y-m');",
                                                    "var tek_date=Ext.Date.format(tekd, 'Y-m');",
                                                    "var pr = r.get('pr');",
                                                    "",
                                                    "if (pr === 0 ) {",
                                                    "    metaData = 'x-hide-display';",
                                                    "} else if ((pr === 1) && (check_date === tek_date) ){",
                                                    "    metaData = 'x-grid-center-icon';",
                                                    "} ",
                                                    "return metaData;"
                                                ]
                                            },
                                            "name": "getClass",
                                            "designerId": "3bba5256-7c8a-460a-bd40-db9052866121"
                                        },
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "// in use",
                                                    "var me = this;",
                                                    "//STORE",
                                                    "",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                                    "",
                                                    "var form = Ext.getCmp('tabFmAppOtoplenie');",
                                                    "",
                                                    "//LOGIN & PASSWORD",
                                                    "var values =stUser.getAt(0);",
                                                    "var params = {",
                                                    "    login:values.get('login'),",
                                                    "    password:values.get('password'),",
                                                    "    address_id:values.get('address_id'),",
                                                    "    address:values.get('address'),",
                                                    "    what:\"delLgotaOtopleniePerer\"",
                                                    "};",
                                                    "",
                                                    "//GRID",
                                                    "var store = view.getStore();",
                                                    "var value = store.getAt(rowIndex).data;",
                                                    "// FORM",
                                                    "",
                                                    "//GRID",
                                                    "var grNachOtoplenie = Ext.getCmp('grNachOtoplenie');",
                                                    "var valueNachisl  = grNachOtoplenie.getView().getSelectionModel().getSelection()[0];",
                                                    "var ind  = grNachOtoplenie.getView().getStore().indexOf(valueNachisl);",
                                                    "",
                                                    "//LOGIKA",
                                                    "",
                                                    "",
                                                    "Ext.Object.merge(value, params);",
                                                    "//console.log(value);",
                                                    "",
                                                    "Ext.MessageBox.confirm({",
                                                    "    title: 'Удаление записи из базы льгот',",
                                                    "    msg: 'Вы удаляете перерасчет по отоплению на бюджет <br> Подтвердите или отмените свои действия.',",
                                                    "    buttons: Ext.MessageBox.OKCANCEL,",
                                                    "    icon: Ext.MessageBox.ERROR,",
                                                    "    buttonText:{",
                                                    "        ok:'подтвеждаю',",
                                                    "        cancel:'отмена'",
                                                    "    },",
                                                    "    fn:function(btn,newValue){",
                                                    "        if(btn=='ok'){",
                                                    "            QueryAddress.updateRecords(value,function(results){",
                                                    "                if(results.success===\"1\"){",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление перерасчета по отоплению на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.INFO",
                                                    "                    });",
                                                    "                    StTekNachApp.load({",
                                                    "                        params: {",
                                                    "                            what:'OtoplenieApp',",
                                                    "                            address_id: values.get('address_id'),",
                                                    "                            login:values.get('login'),",
                                                    "                            password:values.get('password')",
                                                    "                        },",
                                                    "                        callback: function(records,operation,success){",
                                                    "                            if(success){",
                                                    "                                grNachOtoplenie.getView().getSelectionModel().select(ind);",
                                                    "                            }else{",
                                                    "                                form.getForm().reset();",
                                                    "                            }",
                                                    "                        },",
                                                    "                        scope:this",
                                                    "                    });",
                                                    "",
                                                    "                } else {",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление перерасчета по отоплению на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.ERROR",
                                                    "                    });",
                                                    "                }",
                                                    "            });",
                                                    "        }",
                                                    "    }",
                                                    "});"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "48c7e0ee-916e-44f1-a4cb-9716d9b11bf2"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Date",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "sdata",
                                "format": "d-m-y",
                                "menuDisabled": true,
                                "text": "дата с",
                                "width": 75
                            },
                            "name": "MyDateColumn12",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "b22cf965-db6a-4d9b-ad11-2f46700e4dc2"
                        },
                        {
                            "type": "Ext.grid.column.Date",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "fdata",
                                "format": "d-m-y",
                                "menuDisabled": true,
                                "text": "дата по",
                                "width": 75
                            },
                            "name": "MyDateColumn13",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "f0209146-1134-4208-a670-ec7ab9fc4a46"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "fio",
                                "menuDisabled": true,
                                "text": "Ф.И.О",
                                "width": 100
                            },
                            "name": "MyColumn57",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "71c03504-38a4-44da-b77e-d7e7ab96bf17"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "lgota",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "Льгота",
                                "tooltip": "name",
                                "width": 110
                            },
                            "name": "MyColumn58",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "998fcf37-6da5-4796-a735-ad954adcd163"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "center",
                                "dataIndex": "percent",
                                "format": "0",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "%",
                                "width": 45
                            },
                            "name": "MyNumberColumn53",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "e0cf4d16-17be-4e0e-abfd-270657df56d5"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "center",
                                "dataIndex": "people",
                                "format": "0",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "чел",
                                "width": 45
                            },
                            "name": "MyNumberColumn54",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "78476223-9361-4389-b542-075446d0d829"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "tarif",
                                "format": "0.000",
                                "menuDisabled": true,
                                "text": "тариф",
                                "width": 80
                            },
                            "name": "MyNumberColumn55",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "a88593d5-037a-4344-a525-dac9cfec1aff"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "gkal",
                                "format": "0.000000",
                                "menuDisabled": true,
                                "text": "Гк_пред",
                                "width": 90
                            },
                            "name": "MyNumberColumn56",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "c6582de9-f899-4e3d-9a19-04e376f6061f"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "qty",
                                "format": "0.000000",
                                "menuDisabled": true,
                                "text": "Гкал",
                                "width": 90
                            },
                            "name": "MyNumberColumn1",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "089988bc-7598-4c26-b4da-711d32df07e6"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "m2",
                                "format": "0.00",
                                "menuDisabled": true,
                                "text": "Sм&sup2;",
                                "width": 60
                            },
                            "name": "MyNumberColumn181",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "82129586-c12c-4689-a7c1-9afb246c4a9a"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "gkm2",
                                "format": "0.0000000",
                                "menuDisabled": true,
                                "text": "Гк_м&sup2;",
                                "width": 85
                            },
                            "name": "MyNumberColumn",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "afbd5ad8-6caa-4d63-a8dc-6db33e8f0477"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "budjet",
                                "menuDisabled": true,
                                "summaryType": "sum",
                                "text": "бюджет",
                                "width": 80
                            },
                            "name": "MyNumberColumn57",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "426404dd-d0ae-4ebc-9320-1265ee1eeb70"
                        },
                        {
                            "type": "Ext.grid.feature.Summary",
                            "reference": {
                                "name": "features",
                                "type": "array"
                            },
                            "codeClass": null,
                            "name": "MySummaryFeature3",
                            "designerId": "247c7496-b7a0-416b-b85d-76775a644dfd"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "pr",
                                "format": "0",
                                "menuDisabled": true,
                                "text": "пр",
                                "width": 40
                            },
                            "name": "MyNumberColumn58",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "b8e933d7-ce6f-4ce2-b59b-51f25f6e725d"
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Редактировать запись",
                                "flex": null,
                                "maxWidth": null,
                                "menuDisabled": true,
                                "minWidth": null,
                                "width": 30
                            },
                            "name": "MyActionColumn12",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "99a1875b-2a29-49e8-b7b9-ead9d2c91383",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "icon": "resources/css/images/ico/edit.png",
                                        "tooltip": "Редактировать запись"
                                    },
                                    "name": "MyActionColumnItem16",
                                    "designerId": "8e7e067c-caa0-4caa-b727-54f53f30c6a4",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var winAddLgotaPerer = Ext.ClassManager.instantiateByAlias('widget.winaddlgotaperer');",
                                                    "var form = winAddLgotaPerer.down('#fmAddLgotaPerer');",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var values =stUser.getAt(0);",
                                                    "var value = record;",
                                                    "var metod =value.get('metod') ;",
                                                    "",
                                                    "view.getSelectionModel().select(rowIndex);",
                                                    "values.set({'vibor':'editLgotaOtoplenie'});",
                                                    "stUser.sync();",
                                                    "",
                                                    "form.down('#btAddLgotaPerer').setText('Обновить запись');",
                                                    "form.loadRecord(value);",
                                                    "form.getForm().findField('summa').setValue(value.get('budjet'));",
                                                    "",
                                                    "winAddLgotaPerer.setTitle('Редактирование записи на бюджет');",
                                                    "",
                                                    "winAddLgotaPerer.show();"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "f483f7f3-b39b-4f80-9763-1b67dc94b7f9"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Удалить запись",
                                "flex": null,
                                "maxWidth": null,
                                "menuDisabled": true,
                                "minWidth": null,
                                "width": 35
                            },
                            "name": "MyActionColumn13",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "b9d5eb35-a806-4438-8758-75c8207868f1",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "icon": "resources/css/images/ico/no.png",
                                        "tooltip": "Удалить  запись "
                                    },
                                    "name": "MyActionColumnItem17",
                                    "designerId": "fc8d8ce6-23a1-4396-848c-10a70e9b9063",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "v",
                                                    "metadata",
                                                    "r",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "store"
                                                ],
                                                "fn": "getClass",
                                                "implHandler": [
                                                    "var tekd = r.get('data');",
                                                    "var dt = new Date();",
                                                    "var check_date=Ext.Date.format(dt, 'Y-m');",
                                                    "var tek_date=Ext.Date.format(tekd, 'Y-m');",
                                                    "var pr = r.get('pr');",
                                                    "if (pr === 1 ) {",
                                                    "    metaData = 'x-hide-display';",
                                                    "} else if ( (pr === 0)    ){",
                                                    "    metaData = 'x-grid-center-icon';",
                                                    "} ",
                                                    "return metaData;"
                                                ]
                                            },
                                            "name": "getClass",
                                            "designerId": "a68088a5-51b0-4d27-9dea-d3b9d8d7fb70"
                                        },
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "// in use",
                                                    "var me = this;",
                                                    "//STORE",
                                                    "",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                                    "",
                                                    "var form = Ext.getCmp('tabFmAppOtoplenie');",
                                                    "",
                                                    "//LOGIN & PASSWORD",
                                                    "var values =stUser.getAt(0);",
                                                    "var params = {",
                                                    "    login:values.get('login'),",
                                                    "    password:values.get('password'),",
                                                    "    address_id:values.get('address_id'),",
                                                    "    address:values.get('address'),",
                                                    "    what:\"delLgotaOtoplenie\"",
                                                    "};",
                                                    "",
                                                    "//GRID",
                                                    "var store = view.getStore();",
                                                    "var value = store.getAt(rowIndex).data;",
                                                    "// FORM",
                                                    "",
                                                    "//GRID",
                                                    "var grNach = Ext.getCmp('grNachOtoplenie');",
                                                    "var valueNachisl  = grNach.getView().getSelectionModel().getSelection()[0];",
                                                    "var ind  = grNach.getView().getStore().indexOf(valueNachisl);",
                                                    "",
                                                    "//LOGIKA",
                                                    "",
                                                    "",
                                                    "Ext.Object.merge(value, params);",
                                                    "//console.log(value);",
                                                    "",
                                                    "Ext.MessageBox.confirm({",
                                                    "    title: 'Удаление записи из базы льгот',",
                                                    "    msg: 'Вы удаляете начисление на бюджет <br> Подтвердите или отмените свои действия.',",
                                                    "    buttons: Ext.MessageBox.OKCANCEL,",
                                                    "    icon: Ext.MessageBox.ERROR,",
                                                    "    buttonText:{",
                                                    "        ok:'подтвеждаю',",
                                                    "        cancel:'отмена'",
                                                    "    },",
                                                    "    fn:function(btn,newValue){",
                                                    "        if(btn=='ok'){",
                                                    "            QueryAddress.updateRecords(value,function(results){",
                                                    "                if(results.success===\"1\"){",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление записи по отоплению на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.INFO",
                                                    "                    });",
                                                    "                    StTekNachApp.load({",
                                                    "                        params: {",
                                                    "                            what:'OtoplenieApp',",
                                                    "                            address_id: values.get('address_id'),",
                                                    "                            login:values.get('login'),",
                                                    "                            password:values.get('password')",
                                                    "                        },",
                                                    "                        callback: function(records,operation,success){",
                                                    "                            if(success){",
                                                    "                                grNach.getView().getSelectionModel().select(ind);",
                                                    "                            }else{",
                                                    "                                form.getForm().reset();",
                                                    "                            }",
                                                    "                        },",
                                                    "                        scope:this",
                                                    "                    });",
                                                    "",
                                                    "                } else {",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление начисления на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.ERROR",
                                                    "                    });",
                                                    "                }",
                                                    "            });",
                                                    "        }",
                                                    "    }",
                                                    "});"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "87cfc211-2dd4-4844-8074-cd085d868e8a"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "info",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "инфо",
                                "tooltip": "name",
                                "width": null
                            },
                            "name": "MyColumn59",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "37421387-a95f-43cc-b50a-fc876bdf59d5"
                        },
                        {
                            "type": "Ext.panel.Tool",
                            "reference": {
                                "name": "tools",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "tooltip": "добавить начисление по льготнику",
                                "type": "plus"
                            },
                            "name": "MyTool12",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "bd948fba-ecbe-402d-ac93-b458037fc736",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "owner",
                                            "tool",
                                            "event"
                                        ],
                                        "fn": "callback",
                                        "implHandler": [
                                            "var gridLgotnik = Ext.getCmp('grLgotnikNachApp');",
                                            "var gridNachisl = Ext.getCmp('grNachOtoplenie');",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var values =stUser.getAt(0);",
                                            "var value  = gridLgotnik.getView().getSelectionModel().getSelection()[0];",
                                            "var valueNachisl  = gridNachisl.getView().getSelectionModel().getSelection()[0];",
                                            "var ind  = gridNachisl.getView().getStore().indexOf(valueNachisl);",
                                            "",
                                            "",
                                            "",
                                            "//console.log(valueNachisl.index);",
                                            "if (value !==undefined && valueNachisl !==undefined ){",
                                            "    var winAddLgotaPerer = Ext.ClassManager.instantiateByAlias('widget.winaddlgotaperer');",
                                            "    var form = winAddLgotaPerer.down('#fmAddLgotaPerer');",
                                            "    var rbgTypeNachVoda = winAddLgotaPerer.down('#rbgTypeNachVoda');",
                                            "    var dt = new Date();",
                                            "    var dt_nach = new Date(valueNachisl.get('data'));",
                                            "    var check_date = Ext.Date.format(dt, 'Y-m');",
                                            "    var date_check = Ext.Date.format(dt_nach, 'Y-m');",
                                            "    rbgTypeNachVoda.hide();",
                                            "    winAddLgotaPerer.setTitle('Добавление записи на бюджет');",
                                            "",
                                            "var pr = form.getForm().findField('checkType').getValue();",
                                            "    //console.log(pr);",
                                            "",
                                            "         if (pr === true ) {",
                                            "        values.set({'vibor':'addLgotaOtoplenie'});",
                                            "        stUser.sync();",
                                            "        form.loadRecord(value);",
                                            "        form.getForm().findField('data').setValue(Ext.Date.format(dt, 'Y-m-d'));",
                                            "        form.getForm().findField('sdata').setValue(Ext.Date.getFirstDateOfMonth(dt) );",
                                            "        form.getForm().findField('fdata').setValue(Ext.Date.getLastDateOfMonth(dt) );",
                                            "        form.getForm().findField('tarif').setValue(valueNachisl.get('tarif_gkal')) ;",
                                            "        form.getForm().findField('m2').setValue(\"31.5\");",
                                            "        form.getForm().findField('gkm2').setValue(valueNachisl.get('gkm2'));",
                                            "        form.getForm().findField('gkal').setValue(valueNachisl.get('gkal'));",
                                            "",
                                            "        form.getForm().findField('qty').setValue(31.5 * valueNachisl.get('gkm2'));",
                                            "        form.getForm().findField('summa').setValue((value.get('percent')/100)*31.5 * valueNachisl.get('tarif_gkal')* valueNachisl.get('gkm2'));",
                                            "        form.getForm().findField('checkType').setValue(\"0\");",
                                            "        form.getForm().findField('info').setValue('Добавление записи начисления на бюджет в ручном режиме');",
                                            "        form.getForm().findField('ind').setValue(ind);",
                                            "        winAddLgotaPerer.show();",
                                            "",
                                            "    } else {",
                                            "",
                                            "        values.set({'vibor':'addLgotaOtopleniePerer'});",
                                            "        stUser.sync();",
                                            "        form.loadRecord(value);",
                                            "        form.getForm().findField('data').setValue(Ext.Date.format(dt, 'Y-m-d'));",
                                            "        form.getForm().findField('sdata').setValue(Ext.Date.getFirstDateOfMonth(dt_nach) );",
                                            "        form.getForm().findField('fdata').setValue(Ext.Date.getLastDateOfMonth(dt_nach) );",
                                            "        form.getForm().findField('tarif').setValue(valueNachisl.get('tarif_gkal')) ;",
                                            "        form.getForm().findField('m2').setValue(\"31.5\");",
                                            "        form.getForm().findField('gkm2').setValue(valueNachisl.get('gkm2'));",
                                            "        form.getForm().findField('gkal').setValue(valueNachisl.get('gkal'));",
                                            "        form.getForm().findField('qty').setValue(31.5 * valueNachisl.get('gkm2'));",
                                            "        form.getForm().findField('summa').setValue((value.get('percent')/100)*31.5 * valueNachisl.get('tarif_gkal')* valueNachisl.get('gkm2'));",
                                            "        form.getForm().findField('checkType').setValue(\"1\");",
                                            "        form.getForm().findField('info').setValue('Добавление записи перерасчета на бюджет в ручном режиме');",
                                            "        form.getForm().findField('ind').setValue(ind);",
                                            "        winAddLgotaPerer.show();",
                                            "",
                                            "    }",
                                            "",
                                            "",
                                            "} else{",
                                            "    Ext.MessageBox.show({",
                                            "        title: 'Добавлениезаписи начисления  на бюджет',",
                                            "        msg: 'Не выбран льготчик',",
                                            "        buttons: Ext.MessageBox.OK,",
                                            "        icon: Ext.MessageBox.INFO",
                                            "    });",
                                            "}"
                                        ]
                                    },
                                    "name": "callback",
                                    "designerId": "5f65bf60-926d-49a3-8690-589207d6d80c"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 280,
                        "layout|x": 215,
                        "layout|y": 50,
                        "style": "background-color: #DCDCDC;",
                        "title": "",
                        "toggleOnTitleClick": false,
                        "width": 145
                    },
                    "name": "MyFieldSet26",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "7075c1f6-11e4-4091-83e7-1f3cf6ac9dc6",
                    "cn": [
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Сальдо на початок",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelAlign": "top",
                                "labelWidth": null,
                                "layout|anchor": "100%",
                                "margin": null,
                                "name": "zadol",
                                "padding": "10 0 0 0",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField179",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "04a617af-59d5-41e5-9534-3e68f2f05bd4"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Оплачено",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelAlign": "top",
                                "labelWidth": null,
                                "layout|anchor": "100%",
                                "name": "oplacheno",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField170",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "91eece94-4a71-492b-a10a-b1780e70aca5"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "опл долг",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 60,
                                "layout|anchor": "100%",
                                "name": "foplacheno",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField171",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "cd704900-5f72-4c9d-836b-ed8e4b33252b"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "остаток",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 60,
                                "layout|anchor": "100%",
                                "margin": null,
                                "name": "fdolg",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField181",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "0074ae20-6037-45c4-a8f5-db944da74262"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Сальдо на конец",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelAlign": "top",
                                "labelWidth": 55,
                                "layout|anchor": "100%",
                                "margin": null,
                                "name": "dolg",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField180",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "b73d508f-0e41-4c07-bea2-eef98b53c55e"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "formBind": true,
                                "height": null,
                                "icon": "resources/css/images/ico/yes22.png",
                                "id": "btnOtoplenieAppIns",
                                "itemId": null,
                                "layout|anchor": "100%",
                                "margin": null,
                                "text": "Записати",
                                "width": null
                            },
                            "name": "MyButton27",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "3671ae1d-de4f-42a4-ab36-1744297dc949",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "// in use",
                                            "var me = this;",
                                            "",
                                            "//STORE",
                                            "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var values =stUser.getAt(0);",
                                            "var params = {",
                                            "    login:values.get('login'),",
                                            "    password:values.get('password'),",
                                            "    address_id:values.get('address_id'),",
                                            "    what:'AppOtoplenieIns'",
                                            "};",
                                            "//FORMA",
                                            "var form = button.findParentByType('form').getForm();",
                                            "var value = form.getValues();",
                                            "var grNach = Ext.getCmp('grNachOtoplenie');",
                                            "var record = grNach.getSelectionModel().getSelection()[0];",
                                            "var ind  = grNach.getView().getStore().indexOf(record);",
                                            "//console.log();",
                                            "",
                                            "//LOGIKA",
                                            "Ext.Object.merge(value, params);",
                                            "",
                                            "QueryAddress.updateRecords(value,function(results){",
                                            "",
                                            "    StTekNachApp.load({",
                                            "        params: {",
                                            "            what:'OtoplenieApp',",
                                            "            address_id: values.get('address_id'),",
                                            "            login:values.get('login'),",
                                            "            password:values.get('password')",
                                            "        },",
                                            "        callback: function(records,operation,success){",
                                            "            if(success){",
                                            "                grNach.getView().getSelectionModel().select(ind);",
                                            "            }else{",
                                            "                form.reset();",
                                            "            }",
                                            "        },",
                                            "        scope:this",
                                            "    });",
                                            "});"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "40f6d864-3059-4b74-9f55-83a8e8cf5169"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Date",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": "0px",
                        "fieldLabel": "Период начислен",
                        "fieldStyle": "color: #1791e6; text-shadow: -1px -1px white, 1px 1px #333;font-size:14pt;text-align:center",
                        "format": "F,Y",
                        "hideLabel": true,
                        "hideTrigger": true,
                        "id": null,
                        "labelAlign": "top",
                        "labelWidth": 50,
                        "layout|x": 215,
                        "layout|y": 0,
                        "margin": "10 0 10 0",
                        "name": "data",
                        "startDay": 1,
                        "submitFormat": "Ymd",
                        "width": 145
                    },
                    "name": "MyDateField11",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "73a2d428-5f32-46e4-be01-d0f2ca1a7868"
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 110,
                        "layout|x": 565,
                        "layout|y": 10,
                        "style": "background-color: #DCDCDC;",
                        "title": "МОП",
                        "width": 160
                    },
                    "name": "MyFieldSet27",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "299141d6-56bb-4f76-9acf-3f945913dd42",
                    "cn": [
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 7,
                                "fieldLabel": "Гк/м&sup2;",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 40,
                                "layout|anchor": "100%",
                                "name": "gkm2_mop",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField163",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "3894cf93-30bb-4850-9962-fa10a6ef7384"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 6,
                                "fieldLabel": "Гкал",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 40,
                                "layout|anchor": "100%",
                                "name": "gkal_mop",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField174",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "102800b6-418e-482f-8ee4-2497dabe533c"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": null,
                                "fieldLabel": "Моп",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 40,
                                "layout|anchor": "100%",
                                "name": "mop",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField175",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "712201fb-e524-4a96-b717-ba0ac1dd9d9e"
                        }
                    ]
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 210,
                        "layout|anchor": null,
                        "layout|x": 565,
                        "layout|y": 120,
                        "style": "background-color: #DCDCDC;",
                        "title": "Рассрочка оплаты",
                        "width": 160
                    },
                    "name": "MyFieldSet30",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "099cb04e-b0e1-4067-add4-792da13fb36d",
                    "cn": [
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 7,
                                "fieldLabel": "Задол",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 60,
                                "layout|anchor": "100%",
                                "name": "kzadol",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField163",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "47d20f89-0fb9-4ad8-a0ec-5d162b059f90"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 7,
                                "fieldLabel": "начисл",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 60,
                                "layout|anchor": "100%",
                                "name": "knachisleno",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField1",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "cd2f5561-bf69-4fa6-9970-8efce8759d13"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 7,
                                "fieldLabel": "Платеж",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 60,
                                "layout|anchor": "100%",
                                "name": "koplata",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField2",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "86d2bb9e-da80-4e16-8ac3-f19b5a51bb64"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 6,
                                "fieldLabel": "Оплата",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 60,
                                "layout|anchor": "100%",
                                "name": "koplacheno",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField174",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "96803336-fbf5-404f-8dca-71e32bd1c289"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": null,
                                "fieldLabel": "Долг",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 60,
                                "layout|anchor": "100%",
                                "name": "kdolg",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField175",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "1e8a7921-d5dc-429b-80ae-d2c08249eafb"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "disabled": true,
                                "formBind": true,
                                "height": 30,
                                "icon": "resources/css/images/ico/yes22.png",
                                "id": "btnOplataKredit",
                                "itemId": null,
                                "layout|anchor": "100%",
                                "margin": null,
                                "text": "Начислить",
                                "width": 95
                            },
                            "name": "MyButton66",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "05b05926-7ace-4349-a720-ff24c16b2ff4",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "// in use",
                                            "var me = this;",
                                            "",
                                            "//STORE",
                                            "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var values =stUser.getAt(0);",
                                            "var params = {",
                                            "    login:values.get('login'),",
                                            "    password:values.get('password'),",
                                            "    address_id:values.get('address_id'),",
                                            "    what:'NachOplataKreditAddress'",
                                            "};",
                                            "//FORMA",
                                            "var form = button.findParentByType('form').getForm();",
                                            "var value = form.getValues();",
                                            "var grNach = Ext.getCmp('grNachOtoplenie');",
                                            "var record = grNach.getSelectionModel().getSelection()[0];",
                                            "var ind  = grNach.getView().getStore().indexOf(record);",
                                            "//console.log();",
                                            "//LOGIKA",
                                            "Ext.Object.merge(value, params);",
                                            "",
                                            "Ext.MessageBox.confirm({",
                                            "    title: 'Начислить оплату по рассрочке',",
                                            "    msg: 'Начислить оплату по рассрочке <br>Вы желаете продолжать.',",
                                            "    buttons: Ext.MessageBox.OKCANCEL,",
                                            "    icon: Ext.MessageBox.ERROR,",
                                            "    buttonText:{",
                                            "        ok:'Да',",
                                            "        cancel:'отмена'",
                                            "    },",
                                            "    fn:function(btn,newValue){",
                                            "        if(btn=='ok'){",
                                            "            QueryTeplomer.newPokTeplomera(value,function(data){",
                                            "                if (data.success !=='0'){",
                                            "                    Ext.MessageBox.confirm({",
                                            "                        title: 'Проверка вводимых данных',",
                                            "                        msg: data.msg,",
                                            "                        buttons: Ext.MessageBox.OK,",
                                            "                        icon: Ext.MessageBox.INFO",
                                            "                    });",
                                            "                    StTekNachApp.load({",
                                            "                        params: {",
                                            "                            what:'OtoplenieApp',",
                                            "                            address_id: values.get('address_id'),",
                                            "                            login:values.get('login'),",
                                            "                            password:values.get('password')",
                                            "                        },",
                                            "                        callback: function(records,operation,success){",
                                            "                            if(success){",
                                            "                                grNach.getView().getSelectionModel().select(ind);",
                                            "                            }else{",
                                            "                                form.reset();",
                                            "                            }",
                                            "                        },",
                                            "                        scope:this",
                                            "                    });",
                                            "                }else {",
                                            "                    Ext.MessageBox.confirm({",
                                            "                        title: 'Проверка вводимых данных',",
                                            "                        msg: data.msg,",
                                            "                        buttons: Ext.MessageBox.OK,",
                                            "                        icon: Ext.MessageBox.INFO",
                                            "                    });",
                                            "                }",
                                            "            });",
                                            "        }",
                                            "    }",
                                            "});",
                                            ""
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "ac62466d-b760-4f69-9c54-2db5d3d35361"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 260,
                        "layout|x": 730,
                        "layout|y": 10,
                        "style": "background-color: #DCDCDC;",
                        "title": "перерасчет",
                        "width": 195
                    },
                    "name": "MyFieldSet28",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "f0e94e97-438a-4385-83db-c000b801effb",
                    "cn": [
                        {
                            "type": "Ext.form.field.Date",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "border": null,
                                "fieldLabel": "дата",
                                "fieldStyle": null,
                                "format": "F,Y",
                                "hideTrigger": null,
                                "id": null,
                                "labelAlign": null,
                                "labelWidth": 35,
                                "layout|anchor": "100%",
                                "margin": null,
                                "name": "data_perer",
                                "startDay": 1,
                                "submitFormat": "Ymd",
                                "width": 150
                            },
                            "name": "MyDateField12",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "7c3fcb21-5be6-401d-811a-82b8bfcf55a2",
                            "cn": [
                                {
                                    "type": "viewcontrollereventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onDatefieldSelectPerer",
                                        "implHandler": [
                                            "var form = field.findParentByType('form').getForm();",
                                            "",
                                            "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                            "",
                                            "StTekNachApp.each(function(record){",
                                            "    if(Ext.Date.format(record.get('data'), 'F,Y') == Ext.Date.format(value, 'F,Y')) {",
                                            "        form.findField('tarif_perer').setValue(record.get('tarif_gkal'));",
                                            "        form.findField('gkal_old').setValue(record.get('gkal'));",
                                            "",
                                            "",
                                            "        // console.log(Ext.Date.format(record.get('data'), 'F,Y'));",
                                            "    }",
                                            "",
                                            "});",
                                            ""
                                        ],
                                        "name": "select",
                                        "scope": "me"
                                    },
                                    "name": "onDatefieldSelectPerer",
                                    "designerId": "073d1418-95d9-4e03-a2ca-6da7e7fc97df"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 3,
                                "fieldLabel": "Тариф_перер",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 85,
                                "layout|anchor": "100%",
                                "name": "tarif_perer",
                                "value": [
                                    "0"
                                ],
                                "width": 150
                            },
                            "name": "MyNumberField272",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "897ad4df-b462-47e0-a5c6-0b41af14209f"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 6,
                                "fieldLabel": "Гкал_предыд",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 85,
                                "layout|anchor": "100%",
                                "name": "gkal_old",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField176",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "7b70a050-74ee-46bd-a132-2aed0dbdd794"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 6,
                                "fieldLabel": "Гкал_новые",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 85,
                                "layout|anchor": "100%",
                                "name": "gkal_new",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField4",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "378ae3ec-261d-4a32-b8f6-a62da8c6b208"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 6,
                                "fieldLabel": "Гкал_перер",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 85,
                                "layout|anchor": "100%",
                                "name": "perer_gkal",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField3",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "562414f3-c68c-4d1c-82cf-9661aa90f8cb"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 7,
                                "fieldLabel": "Гкал/м&sup2;_пер",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 85,
                                "layout|anchor": "100%",
                                "name": "gkm2_perer",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField177",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "2d59859f-4a61-4f35-a9df-ce29b3d865d8"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Сумма_перер",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 85,
                                "layout|anchor": "100%",
                                "name": "perer",
                                "value": [
                                    "0"
                                ],
                                "width": null
                            },
                            "name": "MyNumberField178",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "d5810b10-ddf1-40d5-8f63-84a8decda803"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "disabled": true,
                                "formBind": true,
                                "height": 30,
                                "icon": "resources/css/images/ico/yes22.png",
                                "id": "btnOtopleniePererIns",
                                "itemId": null,
                                "layout|anchor": "100%",
                                "margin": null,
                                "text": "Выполнить перерасч",
                                "width": 95
                            },
                            "name": "MyButton28",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "5dc99365-06de-4863-8da9-d8ee81ca8ee3",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "// in use",
                                            "var me = this;",
                                            "",
                                            "//STORE",
                                            "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var values =stUser.getAt(0);",
                                            "var params = {",
                                            "    login:values.get('login'),",
                                            "    password:values.get('password'),",
                                            "    address_id:values.get('address_id'),",
                                            "    what:'AppOtopleniePererIns'",
                                            "};",
                                            "//FORMA",
                                            "var form = button.findParentByType('form').getForm();",
                                            "var value = form.getValues();",
                                            "var grNach = Ext.getCmp('grNachOtoplenie');",
                                            "var valueNachisl  = grNach.getView().getSelectionModel().getSelection()[0];",
                                            "var ind = parseInt(valueNachisl.index,0);",
                                            "//console.log();",
                                            "",
                                            "//LOGIKA",
                                            "Ext.Object.merge(value, params);",
                                            "",
                                            "var newValue = value.perer_gkal;",
                                            "if (newValue !== 0){",
                                            "    Ext.MessageBox.confirm({",
                                            "        title: 'Перерасчет по квартире',",
                                            "        msg: 'Перерасчет по отоплениию <br>Вы желаете продолжать.',",
                                            "        buttons: Ext.MessageBox.OKCANCEL,",
                                            "        icon: Ext.MessageBox.ERROR,",
                                            "        buttonText:{",
                                            "            ok:'Да',",
                                            "            cancel:'отмена'",
                                            "        },",
                                            "        fn:function(btn,newValue){",
                                            "            if(btn=='ok'){",
                                            "                var myMask= Ext.Msg.show({",
                                            "                    title:'Перерасчет...',",
                                            "                    msg: 'Перерасчет по отоплению.Ожидайте...',",
                                            "                    buttons: Ext.Msg.CANCEL,",
                                            "                    wait: true,",
                                            "                    modal: true,",
                                            "                    icon: Ext.Msg.INFO",
                                            "                });",
                                            "                QueryTeplomer.newPokTeplomera(value,function(data){",
                                            "                    if (data.success !=='0'){",
                                            "                        StTekNachApp.load({",
                                            "                            params: {",
                                            "                                what:'OtoplenieApp',",
                                            "                                address_id: values.get('address_id'),",
                                            "                                login:values.get('login'),",
                                            "                                password:values.get('password')",
                                            "                            },",
                                            "                            callback: function(records,operation,success){",
                                            "                                if(success){",
                                            "                                    grNach.getView().getSelectionModel().select(ind);",
                                            "                                }else{",
                                            "                                    form.reset();",
                                            "                                }",
                                            "                            },",
                                            "                            scope:this",
                                            "                        });",
                                            "                        myMask.close();",
                                            "                        Ext.MessageBox.confirm({",
                                            "                            title: 'Проверка вводимых данных',",
                                            "                            msg: data.msg,",
                                            "                            buttons: Ext.MessageBox.OK,",
                                            "                            icon: Ext.MessageBox.INFO",
                                            "                        });",
                                            "                    }else{",
                                            "                        myMask.close();",
                                            "                    }",
                                            "                });",
                                            "            }",
                                            "        }",
                                            "    });",
                                            "}",
                                            ""
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "cd639dd9-15ea-46c5-9c9a-d8cb8ccadad0"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 225,
                        "layout|x": 930,
                        "layout|y": 10,
                        "style": "background-color: #DCDCDC;",
                        "title": "По льготе",
                        "width": 170
                    },
                    "name": "MyFieldSet29",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "0ce843db-c996-4e14-8b7f-89c89125e4d0",
                    "cn": [
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "S_льг (м&sup2;)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 65,
                                "layout|anchor": "100%",
                                "name": "square_lg",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField164",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "5f0c8f60-c509-4637-8387-ea3a3f079e22"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 7,
                                "fieldLabel": "Гкал (1м&sup2;)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 65,
                                "layout|anchor": "100%",
                                "name": "gkm2_lg",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField203",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "7c01250b-dd82-461a-8cce-8600defe9e69"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Бюд (м&sup2;)",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 65,
                                "layout|anchor": "100%",
                                "name": "budjet_m2",
                                "value": [
                                    "0"
                                ],
                                "width": 140
                            },
                            "name": "MyNumberField165",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "4da53cf3-07db-4e03-952d-ee28e8ba3e24"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Бюд гкал",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 65,
                                "layout|anchor": "100%",
                                "name": "budjet_gkal",
                                "value": [
                                    "0"
                                ],
                                "width": 140
                            },
                            "name": "MyNumberField168",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "eea6e6ea-ac61-418d-aecd-050fccab3688"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Бюд моп",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 65,
                                "layout|anchor": "100%",
                                "name": "budjet_mop",
                                "value": [
                                    "0"
                                ],
                                "width": 140
                            },
                            "name": "MyNumberField166",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "c39cfc18-78b4-4e7a-b03b-e5aab4071d47"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Бюджет",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 65,
                                "layout|anchor": "100%",
                                "name": "budjet",
                                "value": [
                                    "0"
                                ],
                                "width": 140
                            },
                            "name": "MyNumberField169",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "9269f9a8-ab83-4fc4-bd6d-1c0ffe603acf"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Перер",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 65,
                                "layout|anchor": "100%",
                                "name": "pbudjet",
                                "value": [
                                    "0"
                                ],
                                "width": 140
                            },
                            "name": "MyNumberField167",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "9478140f-6157-4e9c-bbd8-c844f97740eb"
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "инфо бюджет",
                        "layout|x": 730,
                        "layout|y": 305,
                        "name": "msq_lgota",
                        "style": "background-color: #f3f3f3;",
                        "width": 355
                    },
                    "name": "MyTextField46",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "9a8e7cf0-b42c-4c3b-b746-b576dcb711e7"
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "formBind": true,
                        "height": 30,
                        "icon": "resources/css/images/ico/refresh.png",
                        "id": "btnOtoplenieAppReset",
                        "itemId": null,
                        "layout|x": 1050,
                        "layout|y": 240,
                        "scale": "medium",
                        "text": "",
                        "tooltip": "Восстановить",
                        "width": 30
                    },
                    "name": "MyButton29",
                    "configAlternates": {
                        "tooltip": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "b555d422-da3e-4f26-9a30-733ab3462834",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "button",
                                    "e"
                                ],
                                "fn": "handler",
                                "implHandler": [
                                    "var form = button.findParentByType('form').getForm();",
                                    "var grNach = Ext.getCmp('grNachOtoplenie');",
                                    "var record = grNach.getSelectionModel().getSelection()[0];",
                                    "var ind  = grNach.getView().getStore().indexOf(record);",
                                    "grNach.getView().getSelectionModel().clearSelections();",
                                    "grNach.getView().getSelectionModel().select(ind);"
                                ]
                            },
                            "name": "handler",
                            "designerId": "757375a3-1261-4824-be6a-d31799a84e3c"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "formBind": true,
                        "height": 30,
                        "icon": "resources/css/images/ico/schet.png",
                        "id": "btnOtoplenieAppPerer",
                        "itemId": null,
                        "layout|x": 1010,
                        "layout|y": 240,
                        "scale": "medium",
                        "text": "",
                        "tooltip": "Просчитать",
                        "width": 30
                    },
                    "name": "MyButton30",
                    "configAlternates": {
                        "tooltip": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "9ce65513-2d01-4f7e-9f09-4b02edbdcec0",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "button",
                                    "e"
                                ],
                                "fn": "handler",
                                "implHandler": [
                                    "//this.up('#winAddVodomer').close();",
                                    "var form = button.findParentByType('form').getForm();",
                                    "//form.reset();",
                                    "var zadol = form.findField('zadol').getValue();",
                                    "var tarif = form.findField('tarif_gkal').getValue();",
                                    "",
                                    "var gkal = form.findField('gkal').getValue();",
                                    "var gkal_mop = form.findField('gkal_mop').getValue();",
                                    "var square = form.findField('square').getValue();",
                                    "var square_lg = form.findField('square_lg').getValue();",
                                    "var perer = form.findField('perer').getValue();",
                                    "var budjet = form.findField('budjet').getValue();",
                                    "var budjet_mop = form.findField('budjet_mop').getValue();",
                                    "var pbudjet = form.findField('pbudjet').getValue();",
                                    "var oplacheno = form.findField('oplacheno').getValue();",
                                    "",
                                    "var gkm2_mop =0;",
                                    "var gkm2 = 0;",
                                    "var otoplenie = 0;",
                                    "var mop = 0;",
                                    "var nacisleno = 0;",
                                    "",
                                    "",
                                    "if (tarif===0)  {",
                                    "",
                                    "    Ext.MessageBox.show({",
                                    "        title: 'Проверка тарифа',",
                                    "        msg: 'Введите тариф по услуге',",
                                    "        buttons: Ext.MessageBox.OK,",
                                    "        icon: Ext.MessageBox.INFO",
                                    "    });",
                                    "} else {",
                                    "    otoplenie = gkal * tarif - budjet ;",
                                    "    mop = gkal_mop * tarif - budjet_mop;",
                                    "    gkm2 = gkal / square;",
                                    "    gkm2_mop = gkal_mop / square;",
                                    "    nachisleno =otoplenie + mop + perer - pbudjet ;",
                                    "    form.findField('gkm2').setValue(gkm2);",
                                    "    form.findField('gkm2_mop').setValue(gkm2_mop);",
                                    "    form.findField('otoplenie').setValue(otoplenie);",
                                    "    form.findField('mop').setValue(mop);",
                                    "    form.findField('nachisleno').setValue(nachisleno);",
                                    "    form.findField('dolg').setValue(zadol + nachisleno - oplacheno);",
                                    "",
                                    "}",
                                    ""
                                ]
                            },
                            "name": "handler",
                            "designerId": "91b60b28-5ae1-4230-8f7b-55a2861196da"
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "инфо перер",
                        "layout|x": 730,
                        "layout|y": 275,
                        "name": "info",
                        "style": "background-color: #f3f3f3;",
                        "width": 355
                    },
                    "name": "MyTextField",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "445377c8-535c-4162-902d-31e7a38e7cb5"
                }
            ]
        },
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|snapToGrid": 5,
                "height": null,
                "id": "tabFmAppPodogrev",
                "itemId": null,
                "layout": "absolute",
                "minHeight": null,
                "title": "Підігрів",
                "width": null
            },
            "name": "MyForm8",
            "configAlternates": {
                "scrollable": "boolean"
            },
            "designerId": "62c294f2-46c5-4c4c-82bb-1e9831973379",
            "cn": [
                {
                    "type": "Ext.tab.Tab",
                    "reference": {
                        "name": "tabConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "name": "TabConfig3",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "3ab243e7-3723-4518-b2a7-20dcb1a61c4b"
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|createAlias": null,
                        "forceFit": null,
                        "height": 490,
                        "id": "grNachPodogrev",
                        "layout|x": 0,
                        "layout|y": 0,
                        "scrollable": true,
                        "store": "StTekNachApp",
                        "title": "Период начисления",
                        "width": 225
                    },
                    "name": "MyGridPanel10",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "68ce78ec-c007-4f0b-af7b-d0ac308bcc22",
                    "cn": [
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "нет начислений",
                                "style": null
                            },
                            "name": "MyGridView10",
                            "configAlternates": {
                                "style": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "341ec29f-c613-49f3-a17e-b72df40941c5"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "address_id",
                                "hidden": true,
                                "text": "Address_id"
                            },
                            "name": "MyNumberColumn43",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "8f7e8e41-0628-4907-b789-fb2cdf9a12ee"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "god",
                                "format": "0",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "год",
                                "width": 50
                            },
                            "name": "MyNumberColumn44",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "56b2bd5d-fae2-4335-adad-7136f1fc76fa"
                        },
                        {
                            "type": "Ext.grid.column.Date",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "data",
                                "format": "F",
                                "menuDisabled": true,
                                "text": "месяц",
                                "width": 80
                            },
                            "name": "MyDateColumn8",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "ff84e213-f826-4f1b-af98-b32efec61981"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "zadol",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "задол",
                                "width": 70
                            },
                            "name": "MyColumn42",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "41843966-ca8a-4ca1-b03f-a091eddd2a70",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "e203bbf2-a0c4-4832-ba7b-140dd3f09e70"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "mec",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "мес",
                                "width": 49
                            },
                            "name": "MyColumn43",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "6c00efe3-c2a3-406a-8681-6861d04bc480"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "period",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "Период",
                                "width": 62
                            },
                            "name": "MyColumn44",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "dd85541f-fe38-4c76-9c09-b8e63165448d"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "nachisleno",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "начисл",
                                "width": 70
                            },
                            "name": "MyColumn45",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "613cda8d-248d-4301-85c5-c4d6fbdb04b1",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "ebdd3b5f-fdf5-42fa-ba7d-555cd2b5c34b"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "oplacheno",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "оплач",
                                "width": 70
                            },
                            "name": "MyColumn46",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "e2d169b1-470a-4a24-ab29-a0b235fb0b35",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "3b6ca29c-9f2e-4130-bdf7-61a74078d537"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "dolg",
                                "flex": null,
                                "menuDisabled": true,
                                "text": "Долг",
                                "width": 80
                            },
                            "name": "MyColumn47",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "7994d8d0-c249-49a1-97e9-805cf6effb15",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "value",
                                            "metaData",
                                            "record",
                                            "rowIndex",
                                            "colIndex",
                                            "store",
                                            "view"
                                        ],
                                        "fn": "renderer",
                                        "implHandler": [
                                            "if (value < 0) {",
                                            "      metaData.style = 'color:red';",
                                            "  }",
                                            "      return value;",
                                            ""
                                        ]
                                    },
                                    "name": "renderer",
                                    "designerId": "e7a2cd6d-0f9c-4d2f-aab2-25f576733655"
                                }
                            ]
                        },
                        {
                            "type": "Ext.panel.Tool",
                            "reference": {
                                "name": "tools",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "tooltip": "выбрать все записи",
                                "type": "plus"
                            },
                            "name": "MyTool9",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "fc671fa3-ca07-4e75-8cfa-bf0f25226ac0",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "owner",
                                            "tool",
                                            "event"
                                        ],
                                        "fn": "callback",
                                        "implHandler": [
                                            "//STORE",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                            "//LOGIN & PASSWORD",
                                            "var values =stUser.getAt(0);",
                                            "// FORM",
                                            "var form = tool.findParentByType('form');",
                                            "// DATA",
                                            "",
                                            "//LOGIKA",
                                            "StTekNachApp.load({",
                                            "    params: {",
                                            "        what:'PodogrevAppAll',",
                                            "        address_id: values.get('address_id'),",
                                            "        login:values.get('login'),",
                                            "        password:values.get('password')",
                                            "    },",
                                            "    callback: function(records,operation,success){",
                                            "        if(success){",
                                            "            form.getForm().reset();",
                                            "            form.getForm().loadRecord(records[0]);",
                                            "        }else{",
                                            "            form.getForm().reset();",
                                            "        }",
                                            "    },",
                                            "    scope:this",
                                            "});"
                                        ]
                                    },
                                    "name": "callback",
                                    "designerId": "1983a0d7-253f-41af-9b72-502fbc6d34a1"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "collapsible": null,
                        "forceFit": null,
                        "height": 260,
                        "id": "grLgotaNachPodogrev",
                        "layout|x": 240,
                        "layout|y": 230,
                        "scrollable": true,
                        "store": "StLgotaNachVoda",
                        "title": "нарахування на бюджет",
                        "width": 810
                    },
                    "name": "MyGridPanel11",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "a367214d-1a57-4428-9616-6b0210fc044c",
                    "cn": [
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "Начислений по льготе нет",
                                "style": null
                            },
                            "name": "MyGridView11",
                            "configAlternates": {
                                "style": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "b5915243-d2b0-4c7b-b629-f9a622fc7234"
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Перерасчет",
                                "icon": null,
                                "maxWidth": null,
                                "menuDisabled": true,
                                "minWidth": null,
                                "width": 30
                            },
                            "name": "MyActionColumn8",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "4ed4f813-626f-4419-82e1-4e2156b553e8",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|displayName": "Добавить перерасчет",
                                        "icon": "resources/css/images/ico/add.png",
                                        "tooltip": "Добавить перерасчет по льготе"
                                    },
                                    "name": "MyActionColumnItem10",
                                    "designerId": "c79dfc8b-20a1-4bb4-abe0-8496a01702e5",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "v",
                                                    "metadata",
                                                    "r",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "store"
                                                ],
                                                "fn": "getClass",
                                                "implHandler": [
                                                    "var pr = r.get('pr');",
                                                    "if (pr === 0 ) {",
                                                    "    metaData = 'x-grid-center-icon';",
                                                    "} else if (pr === 1   ){",
                                                    "    metaData = 'x-hide-display';  ",
                                                    "} ",
                                                    "return metaData;"
                                                ]
                                            },
                                            "name": "getClass",
                                            "designerId": "9be566e7-24bb-4ee0-a7f4-0307eca7a183"
                                        },
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var dt = new Date();",
                                                    "var winAddLgotaPerer = Ext.ClassManager.instantiateByAlias('widget.winaddlgotaperer');",
                                                    "var form = winAddLgotaPerer.down('#fmAddLgotaPerer');",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var values =stUser.getAt(0);",
                                                    "var value = record;",
                                                    "",
                                                    "view.getSelectionModel().select(rowIndex);",
                                                    "values.set({'vibor':'addLgotaPodogrevPerer'});",
                                                    "stUser.sync();",
                                                    "form.loadRecord(value);",
                                                    "form.getForm().findField('data').setValue(Ext.Date.format(dt, 'Y-m-d'));",
                                                    "form.getForm().findField('summa').setValue(value.get('budjet'));",
                                                    "form.getForm().findField('m2').hide();",
                                                    "form.getForm().findField('gkm2').hide();",
                                                    "form.getForm().findField('gkal').hide();",
                                                    "",
                                                    "winAddLgotaPerer.show();"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "9d20ce66-556f-4cbe-b709-c56ed50179bf"
                                        }
                                    ]
                                },
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|displayName": "Удалить перерасчет",
                                        "icon": "resources/css/images/ico/delete.png",
                                        "tooltip": "Удалить перерасчет по льготе"
                                    },
                                    "name": "MyActionColumnItem11",
                                    "designerId": "8d0c60bd-c4f0-4f3e-8be9-59cd369b56c1",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "v",
                                                    "metadata",
                                                    "r",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "store"
                                                ],
                                                "fn": "getClass",
                                                "implHandler": [
                                                    "var tekd = r.get('data');",
                                                    "var dt = new Date();",
                                                    "var check_date=Ext.Date.format(dt, 'Y-m');",
                                                    "var tek_date=Ext.Date.format(tekd, 'Y-m');",
                                                    "var pr = r.get('pr');",
                                                    "",
                                                    "if (pr === 0 ) {",
                                                    "    metaData = 'x-hide-display';",
                                                    "} else if ((pr === 1) && (check_date === tek_date) ){",
                                                    "    metaData = 'x-grid-center-icon';",
                                                    "} ",
                                                    "return metaData;"
                                                ]
                                            },
                                            "name": "getClass",
                                            "designerId": "57412778-db68-47ae-8c19-86d48dd46026"
                                        },
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "// in use",
                                                    "var me = this;",
                                                    "//STORE",
                                                    "",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                                    "",
                                                    "var form = Ext.getCmp('tabFmAppPodogrev');",
                                                    "",
                                                    "//LOGIN & PASSWORD",
                                                    "var values =stUser.getAt(0);",
                                                    "var params = {",
                                                    "    login:values.get('login'),",
                                                    "    password:values.get('password'),",
                                                    "    address_id:values.get('address_id'),",
                                                    "    address:values.get('address'),",
                                                    "    what:\"delLgotaPodogrevPerer\"",
                                                    "};",
                                                    "",
                                                    "//GRID",
                                                    "var store = view.getStore();",
                                                    "var value = store.getAt(rowIndex).data;",
                                                    "// FORM",
                                                    "",
                                                    "//GRID",
                                                    "var grNach = Ext.getCmp('grNachPodogrev');",
                                                    "var valueNachisl  = grNach.getView().getSelectionModel().getSelection()[0];",
                                                    "var ind  = grNach.getView().getStore().indexOf(valueNachisl);",
                                                    "",
                                                    "//LOGIKA",
                                                    "",
                                                    "",
                                                    "Ext.Object.merge(value, params);",
                                                    "//console.log(value);",
                                                    "",
                                                    "Ext.MessageBox.confirm({",
                                                    "    title: 'Удаление записи из базы льгот',",
                                                    "    msg: 'Вы удаляете перерасчет по подогреву на бюджет <br> Подтвердите или отмените свои действия.',",
                                                    "    buttons: Ext.MessageBox.OKCANCEL,",
                                                    "    icon: Ext.MessageBox.ERROR,",
                                                    "    buttonText:{",
                                                    "        ok:'подтвеждаю',",
                                                    "        cancel:'отмена'",
                                                    "    },",
                                                    "    fn:function(btn,newValue){",
                                                    "        if(btn=='ok'){",
                                                    "            QueryAddress.updateRecords(value,function(results){",
                                                    "                if(results.success===\"1\"){",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление перерасчета по подогреву на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.INFO",
                                                    "                    });",
                                                    "                    StTekNachApp.load({",
                                                    "                        params: {",
                                                    "                            what:'PodogrevApp',",
                                                    "                            address_id: values.get('address_id'),",
                                                    "                            login:values.get('login'),",
                                                    "                            password:values.get('password')",
                                                    "                        },",
                                                    "                        callback: function(records,operation,success){",
                                                    "                            if(success){",
                                                    "                                grNach.getView().getSelectionModel().select(ind);",
                                                    "                            }else{",
                                                    "                                form.getForm().reset();",
                                                    "                            }",
                                                    "                        },",
                                                    "                        scope:this",
                                                    "                    });",
                                                    "",
                                                    "                } else {",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление перерасчета по подогреву на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.ERROR",
                                                    "                    });",
                                                    "                }",
                                                    "            });",
                                                    "        }",
                                                    "    }",
                                                    "});"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "17adffc7-3ac5-4484-bf36-a75ff1570c93"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Date",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "sdata",
                                "format": "d-m-y",
                                "menuDisabled": true,
                                "text": "дата с",
                                "width": 75
                            },
                            "name": "MyDateColumn9",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "75bae286-a927-435b-9f53-23329f3a4182"
                        },
                        {
                            "type": "Ext.grid.column.Date",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "fdata",
                                "format": "d-m-y",
                                "menuDisabled": true,
                                "text": "дата по",
                                "width": 75
                            },
                            "name": "MyDateColumn10",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "4ffb040a-770d-40b8-b091-dcd6550fed00"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "fio",
                                "menuDisabled": true,
                                "text": "Ф.И.О",
                                "width": 120
                            },
                            "name": "MyColumn48",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "99f24f1a-91d7-4626-bebe-ee7cf5fbc9f7"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "lgota",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "Льгота",
                                "tooltip": "name",
                                "width": 130
                            },
                            "name": "MyColumn49",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "8e32fad6-8599-4438-835c-ac7fd8a8b095"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "center",
                                "dataIndex": "percent",
                                "format": "0",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "%",
                                "width": 35
                            },
                            "name": "MyNumberColumn45",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "2cdddb86-0519-4b88-b1cd-3f566d32cf61"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "center",
                                "dataIndex": "people",
                                "format": "0",
                                "hidden": null,
                                "menuDisabled": true,
                                "text": "чел",
                                "width": 44
                            },
                            "name": "MyNumberColumn46",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "6ec8d8ab-ec56-40a6-a7a5-cf3db6e0b2cc"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "tarif",
                                "format": "0.000",
                                "menuDisabled": true,
                                "summaryType": null,
                                "text": "тариф",
                                "width": 60
                            },
                            "name": "MyNumberColumn47",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "cae94085-9330-4f7e-8a5e-15d0c322e7d2"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "qty",
                                "format": "0.000",
                                "menuDisabled": true,
                                "summaryType": "sum",
                                "text": "куб",
                                "width": 49
                            },
                            "name": "MyNumberColumn48",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "1f316fae-7806-4faa-8966-c2b340efe0fe"
                        },
                        {
                            "type": "Ext.grid.feature.Summary",
                            "reference": {
                                "name": "features",
                                "type": "array"
                            },
                            "codeClass": null,
                            "name": "MySummaryFeature2",
                            "designerId": "3c050b21-3c57-43ba-9d60-a4e9b49cf9d3"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "align": "right",
                                "dataIndex": "budjet",
                                "menuDisabled": true,
                                "summaryType": "sum",
                                "text": "бюджет",
                                "width": 74
                            },
                            "name": "MyNumberColumn49",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "4dcd2271-b6cd-4968-a7b7-4f207c57e7ea"
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "pr",
                                "format": "0",
                                "menuDisabled": true,
                                "text": "пр",
                                "width": 40
                            },
                            "name": "MyNumberColumn50",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "90eab070-2e61-446c-8981-ec7b71f3c406"
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Редактировать запись",
                                "flex": null,
                                "maxWidth": null,
                                "menuDisabled": true,
                                "minWidth": null,
                                "width": 30
                            },
                            "name": "MyActionColumn9",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "f0125e1e-fb5f-47d3-97ec-094e87a8c55d",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "icon": "resources/css/images/ico/edit.png",
                                        "tooltip": "Редактировать запись"
                                    },
                                    "name": "MyActionColumnItem12",
                                    "designerId": "18c471ae-842e-4bd7-8557-8c3c3468795d",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var dt = new Date();",
                                                    "var winAddLgotaPerer = Ext.ClassManager.instantiateByAlias('widget.winaddlgotaperer');",
                                                    "var form = winAddLgotaPerer.down('#fmAddLgotaPerer');",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var values =stUser.getAt(0);",
                                                    "var value = record;",
                                                    "",
                                                    "view.getSelectionModel().select(rowIndex);",
                                                    "values.set({'vibor':'editLgotaPodogrev'});",
                                                    "stUser.sync();",
                                                    "",
                                                    "form.down('#btAddLgotaPerer').setText('Обновить запись');",
                                                    "form.loadRecord(value);",
                                                    "form.getForm().findField('summa').setValue(value.get('budjet'));",
                                                    "form.getForm().findField('m2').hide();",
                                                    "form.getForm().findField('gkm2').hide();",
                                                    "form.getForm().findField('gkal').hide();",
                                                    "",
                                                    "winAddLgotaPerer.setTitle('Редактирование записи на бюджет');",
                                                    "",
                                                    "winAddLgotaPerer.show();"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "08eb0e86-d9cc-4cd6-9097-898da4472da2"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "Удалить запись",
                                "flex": null,
                                "maxWidth": null,
                                "menuDisabled": true,
                                "minWidth": null,
                                "width": 30
                            },
                            "name": "MyActionColumn10",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "be5696ce-26fc-4f51-8509-9f7c5c6d87fd",
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "icon": "resources/css/images/ico/no.png",
                                        "tooltip": "Удалить  запись "
                                    },
                                    "name": "MyActionColumnItem13",
                                    "designerId": "a64946b6-4266-414c-82be-c412031aba32",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "v",
                                                    "metadata",
                                                    "r",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "store"
                                                ],
                                                "fn": "getClass",
                                                "implHandler": [
                                                    "var tekd = r.get('data');",
                                                    "var dt = new Date();",
                                                    "var check_date=Ext.Date.format(dt, 'Y-m');",
                                                    "var tek_date=Ext.Date.format(tekd, 'Y-m');",
                                                    "var pr = r.get('pr');",
                                                    "if (pr === 1 ) {",
                                                    "    metaData = 'x-hide-display';",
                                                    "} else if ( (pr === 0)  ){",
                                                    "    metaData = 'x-grid-center-icon';",
                                                    "} ",
                                                    "return metaData;"
                                                ]
                                            },
                                            "name": "getClass",
                                            "designerId": "d7bf8993-8638-43b6-91c2-29d254e4e965"
                                        },
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "// in use",
                                                    "var me = this;",
                                                    "//STORE",
                                                    "",
                                                    "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                                    "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                                    "",
                                                    "var form = Ext.getCmp('tabFmAppPodogrev');",
                                                    "",
                                                    "//LOGIN & PASSWORD",
                                                    "var values =stUser.getAt(0);",
                                                    "var params = {",
                                                    "    login:values.get('login'),",
                                                    "    password:values.get('password'),",
                                                    "    address_id:values.get('address_id'),",
                                                    "    address:values.get('address'),",
                                                    "    what:\"delLgotaPodogrev\"",
                                                    "};",
                                                    "",
                                                    "//GRID",
                                                    "var store = view.getStore();",
                                                    "var value = store.getAt(rowIndex).data;",
                                                    "// FORM",
                                                    "",
                                                    "//GRID",
                                                    "var grNach = Ext.getCmp('grNachPodogrev');",
                                                    "var valueNachisl  = grNach.getView().getSelectionModel().getSelection()[0];",
                                                    "var ind  = grNach.getView().getStore().indexOf(valueNachisl);",
                                                    "",
                                                    "//LOGIKA",
                                                    "",
                                                    "",
                                                    "Ext.Object.merge(value, params);",
                                                    "//console.log(value);",
                                                    "",
                                                    "Ext.MessageBox.confirm({",
                                                    "    title: 'Удаление записи из базы льгот',",
                                                    "    msg: 'Вы удаляете начисление на бюджет <br> Подтвердите или отмените свои действия.',",
                                                    "    buttons: Ext.MessageBox.OKCANCEL,",
                                                    "    icon: Ext.MessageBox.ERROR,",
                                                    "    buttonText:{",
                                                    "        ok:'подтвеждаю',",
                                                    "        cancel:'отмена'",
                                                    "    },",
                                                    "    fn:function(btn,newValue){",
                                                    "        if(btn=='ok'){",
                                                    "            QueryAddress.updateRecords(value,function(results){",
                                                    "                if(results.success===\"1\"){",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление начисления по подогреву на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.INFO",
                                                    "                    });",
                                                    "                    StTekNachApp.load({",
                                                    "                        params: {",
                                                    "                            what:'PodogrevApp',",
                                                    "                            address_id: values.get('address_id'),",
                                                    "                            login:values.get('login'),",
                                                    "                            password:values.get('password')",
                                                    "                        },",
                                                    "                        callback: function(records,operation,success){",
                                                    "                            if(success){",
                                                    "                                grNach.getView().getSelectionModel().select(ind);",
                                                    "                            }else{",
                                                    "                                form.getForm().reset();",
                                                    "                            }",
                                                    "                        },",
                                                    "                        scope:this",
                                                    "                    });",
                                                    "",
                                                    "                } else {",
                                                    "                    Ext.MessageBox.show({",
                                                    "                        title: 'Удаление начисления  на бюджет',",
                                                    "                        msg: results.msg,",
                                                    "                        buttons: Ext.MessageBox.OK,",
                                                    "                        icon: Ext.MessageBox.ERROR",
                                                    "                    });",
                                                    "                }",
                                                    "            });",
                                                    "        }",
                                                    "    }",
                                                    "});"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "cfc3b7f8-dc7e-44f1-af7b-db7da79e01bb"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "info",
                                "hidden": true,
                                "menuDisabled": true,
                                "text": "инфо",
                                "tooltip": "name",
                                "width": null
                            },
                            "name": "MyColumn50",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "c3c7542c-adeb-4c35-851e-321d409b90b7"
                        },
                        {
                            "type": "Ext.panel.Tool",
                            "reference": {
                                "name": "tools",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "tooltip": "добавить начисление по льготнику",
                                "type": "plus"
                            },
                            "name": "MyTool10",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "e194c8ba-98f7-409c-9990-ff31f704a8ef",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "owner",
                                            "tool",
                                            "event"
                                        ],
                                        "fn": "callback",
                                        "implHandler": [
                                            "var gridLgotnik = Ext.getCmp('grLgotnikNachApp');",
                                            "var gridNachisl = Ext.getCmp('grNachPodogrev');",
                                            "",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var values =stUser.getAt(0);",
                                            "",
                                            "var value  = gridLgotnik.getView().getSelectionModel().getSelection()[0];",
                                            "var valueNachisl  = gridNachisl.getView().getSelectionModel().getSelection()[0];",
                                            "var ind  = gridNachisl.getView().getStore().indexOf(valueNachisl);",
                                            "",
                                            "if (value !==undefined && valueNachisl !==undefined ){",
                                            "    var winAddLgotaPerer = Ext.ClassManager.instantiateByAlias('widget.winaddlgotaperer');",
                                            "    var form = winAddLgotaPerer.down('#fmAddLgotaPerer');",
                                            "    var dt = new Date();",
                                            "    var dt_nach = new Date(valueNachisl.get('data'));",
                                            "    var check_date = Ext.Date.format(dt, 'Y-m');",
                                            "    var date_check = Ext.Date.format(dt_nach, 'Y-m');",
                                            "    form.getForm().findField('m2').hide();",
                                            "    form.getForm().findField('gkm2').hide();",
                                            "    form.getForm().findField('gkal').hide();",
                                            "",
                                            "    winAddLgotaPerer.setTitle('Добавление записи на бюджет');",
                                            "",
                                            "    if (check_date === date_check ) {",
                                            "",
                                            "        values.set({'vibor':'addLgotaPodogrev'});",
                                            "        stUser.sync();",
                                            "        form.loadRecord(value);",
                                            "        form.getForm().findField('data').setValue(Ext.Date.format(dt, 'Y-m-d'));",
                                            "        form.getForm().findField('sdata').setValue(Ext.Date.getFirstDateOfMonth(dt) );",
                                            "        form.getForm().findField('fdata').setValue(Ext.Date.getLastDateOfMonth(dt) );",
                                            "        form.getForm().findField('tarif').setValue(valueNachisl.get('tarif'));",
                                            "        form.getForm().findField('qty').setValue(valueNachisl.get('gkub_lg'));",
                                            "        form.getForm().findField('summa').setValue(valueNachisl.get('budjet'));",
                                            "        form.getForm().findField('checkType').setValue(\"0\");",
                                            "        form.getForm().findField('info').setValue('Добавление записи начисления на бюджет в ручном режиме');",
                                            "        form.getForm().findField('ind').setValue(ind);",
                                            "        winAddLgotaPerer.show();",
                                            "",
                                            "    } else {",
                                            "",
                                            "        values.set({'vibor':'addLgotaPodogrevPerer'});",
                                            "        stUser.sync();",
                                            "        form.loadRecord(value);",
                                            "        form.getForm().findField('data').setValue(Ext.Date.format(dt, 'Y-m-d'));",
                                            "        form.getForm().findField('sdata').setValue(Ext.Date.getFirstDateOfMonth(dt_nach) );",
                                            "        form.getForm().findField('fdata').setValue(Ext.Date.getLastDateOfMonth(dt_nach) );",
                                            "        form.getForm().findField('tarif').setValue(valueNachisl.get('tarif'));",
                                            "        form.getForm().findField('qty').setValue(valueNachisl.get('gkub_lg'));",
                                            "        form.getForm().findField('summa').setValue(valueNachisl.get('budjet'));",
                                            "        form.getForm().findField('checkType').setValue(\"1\");",
                                            "        form.getForm().findField('info').setValue('Добавление записи перерасчета на бюджет в ручном режиме');",
                                            "        form.getForm().findField('ind').setValue(ind);",
                                            "        winAddLgotaPerer.show();",
                                            "",
                                            "    }",
                                            "",
                                            "",
                                            "} else{",
                                            "    Ext.MessageBox.show({",
                                            "        title: 'Добавлениезаписи начисления  на бюджет',",
                                            "        msg: 'Не выбран льготчик',",
                                            "        buttons: Ext.MessageBox.OK,",
                                            "        icon: Ext.MessageBox.INFO",
                                            "    });",
                                            "}"
                                        ]
                                    },
                                    "name": "callback",
                                    "designerId": "1dd11684-360f-4235-9113-359d840e31fd"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Date",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": "0px",
                        "fieldLabel": "Период начислен",
                        "fieldStyle": "color: #1791e6; text-shadow: -1px -1px white, 1px 1px #333;font-size:14pt;text-align:center",
                        "format": "F,Y",
                        "hideLabel": true,
                        "hideTrigger": true,
                        "id": null,
                        "labelAlign": "top",
                        "labelWidth": 50,
                        "layout|x": 240,
                        "layout|y": 0,
                        "margin": "10 0 10 0",
                        "name": "data",
                        "startDay": 1,
                        "submitFormat": "Ymd",
                        "width": 150
                    },
                    "name": "MyDateField10",
                    "configAlternates": {
                        "scrollable": "boolean"
                    },
                    "designerId": "0fe89f26-98b2-4b6e-8d63-9d218a0e7b8e"
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 175,
                        "layout|x": 240,
                        "layout|y": 45,
                        "style": "background-color: #DCDCDC;",
                        "title": "Сальдо",
                        "width": 155
                    },
                    "name": "MyFieldSet22",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "08de0f88-82e6-4b1a-8aa9-77d628c61d59",
                    "cn": [
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Сальдо на початок",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelAlign": "top",
                                "labelWidth": 55,
                                "layout|anchor": "100%",
                                "name": "zadol",
                                "value": [
                                    "0"
                                ],
                                "width": 119
                            },
                            "name": "MyNumberField243",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "ecf95d97-be9e-4644-ab1f-8774332540d0"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Сальдо на конец",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelAlign": "top",
                                "labelWidth": 55,
                                "layout|anchor": "100%",
                                "name": "dolg",
                                "value": [
                                    "0"
                                ],
                                "width": 119
                            },
                            "name": "MyNumberField244",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "9020ff1a-9da7-4a4f-897d-8cf59a9027e4"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "formBind": true,
                                "height": 30,
                                "icon": "resources/css/images/ico/yes22.png",
                                "id": "btnPodogrevAppIns",
                                "itemId": null,
                                "layout|anchor": "100%",
                                "margin": "10 0 0 0",
                                "text": "Записати",
                                "width": 90
                            },
                            "name": "MyButton23",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "ab780165-82ff-4015-85b7-4c7d93edb0ba",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "// in use",
                                            "var me = this;",
                                            "",
                                            "//STORE",
                                            "var StTekNachApp = Ext.data.StoreManager.get(\"StTekNachApp\");",
                                            "var stUser = Ext.data.StoreManager.get(\"StUser\");",
                                            "var values =stUser.getAt(0);",
                                            "var params = {",
                                            "    login:values.get('login'),",
                                            "    password:values.get('password'),",
                                            "    address_id:values.get('address_id'),",
                                            "    what:'AppPodogrevIns'",
                                            "};",
                                            "//FORMA",
                                            "var form = button.findParentByType('form').getForm();",
                                            "var value = form.getValues();",
                                            "var grNach = Ext.getCmp('grNachPodogrev');",
                                            "var record = grNach.getSelectionModel().getSelection()[0];",
                                            "var ind  = grNach.getView().getStore().indexOf(record);",
                                            "//LOGIKA",
                                            "Ext.Object.merge(value, params);",
                                            "",
                                            "QueryAddress.updateRecords(value,function(results){",
                                            "",
                                            "    StTekNachApp.load({",
                                            "        params: {",
                                            "            what:'PodogrevApp',",
                                            "            address_id: values.get('address_id'),",
                                            "            login:values.get('login'),",
                                            "            password:values.get('password')",
                                            "        },",
                                            "        callback: function(records,operation,success){",
                                            "            if(success){",
                                            "                grNach.getView().getSelectionModel().select(ind);",
                                            "            }else{",
                                            "                form.reset();",
                                            "            }",
                                            "        },",
                                            "        scope:this",
                                            "    });",
                                            "});",
                                            ""
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "7cf8ce24-be58-4bf5-858e-c55bcaa2a2c5"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|snapToGrid": 5,
                        "height": 215,
                        "layout": "absolute",
                        "layout|x": 400,
                        "layout|y": 5,
                        "style": "background-color: #DCDCDC;",
                        "title": "Начислено, грн",
                        "width": 660
                    },
                    "name": "MyFieldSet23",
                    "configAlternates": {
                        "style": "string",
                        "scrollable": "boolean"
                    },
                    "designerId": "46136e72-edc6-4566-9431-0ecc4e447a6f",
                    "cn": [
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 3,
                                "fieldLabel": "тариф",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 55,
                                "name": "tarif",
                                "value": [
                                    "0"
                                ],
                                "width": 115
                            },
                            "name": "MyNumberField269",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "bff337c6-fbb3-40b5-8aad-76a1602631c6"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 3,
                                "fieldLabel": "Тар пер",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 55,
                                "layout|x": 0,
                                "layout|y": 90,
                                "name": "ptarif",
                                "value": [
                                    "0"
                                ],
                                "width": 115
                            },
                            "name": "MyNumberField270",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "9c04cf0e-c008-4ef9-8d77-2b135e9c72ff"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 0,
                                "fieldLabel": "человек",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 55,
                                "layout|x": 0,
                                "layout|y": 30,
                                "name": "people",
                                "value": [
                                    "0"
                                ],
                                "width": 115
                            },
                            "name": "MyNumberField245",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "94a67e82-ff0b-4460-9047-6edccceca408"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 0,
                                "fieldLabel": "Кубов",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 55,
                                "layout|x": 0,
                                "layout|y": 60,
                                "name": "kub",
                                "value": [
                                    "0"
                                ],
                                "width": 115
                            },
                            "name": "MyNumberField246",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "739c118c-0e5b-4aab-b9b3-7e1f1e5ebafe"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Норма",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 55,
                                "layout|x": 135,
                                "layout|y": 30,
                                "name": "norma",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField248",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "ce522af2-fe8c-4b26-b52c-be8e3b543fe4"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Начислено",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 70,
                                "layout|x": 465,
                                "layout|y": 5,
                                "name": "nachisleno",
                                "value": [
                                    "0"
                                ],
                                "width": 155
                            },
                            "name": "MyNumberField249",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "2e191f57-c46f-4651-b475-bb7c6bb44798"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Оплачено",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 70,
                                "layout|x": 465,
                                "layout|y": 35,
                                "name": "oplacheno",
                                "value": [
                                    "0"
                                ],
                                "width": 155
                            },
                            "name": "MyNumberField250",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "fd69ac96-1d94-4304-ba40-6fa94827d1fb"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "decimalPrecision": 3,
                                "fieldLabel": "Гкал",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 55,
                                "layout|x": 135,
                                "layout|y": 0,
                                "name": "gkal",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField251",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "218e8a1b-55e4-41c2-a83e-febfc3c73e62"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Гвода",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 55,
                                "layout|x": 135,
                                "layout|y": 60,
                                "name": "podogrev",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField252",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "516d86b8-e997-41a6-9773-9a7917191c40"
                        },
                        {
                            "type": "Ext.form.field.Number",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoStripChars": true,
                                "fieldLabel": "Перер",
                                "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                "hideLabel": null,
                                "hideTrigger": true,
                                "labelWidth": 55,
                                "layout|x": 135,
                                "layout|y": 90,
                                "name": "perer",
                                "value": [
                                    "0"
                                ],
                                "width": 125
                            },
                            "name": "MyNumberField253",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "429b071b-534a-4ae2-80e9-1ab3d53ced28"
                        },
                        {
                            "type": "Ext.form.FieldSet",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "height": 115,
                                "layout|x": 285,
                                "layout|y": 0,
                                "style": "background-color: #f1eeee;",
                                "title": "Бюджет",
                                "width": 145
                            },
                            "name": "MyFieldSet24",
                            "configAlternates": {
                                "style": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "74ec44e1-e37c-487e-88e4-6334c39df24b",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "autoStripChars": true,
                                        "decimalPrecision": 0,
                                        "fieldLabel": "Кубов",
                                        "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                        "hideLabel": null,
                                        "hideTrigger": true,
                                        "labelWidth": 55,
                                        "layout|anchor": "100%",
                                        "name": "gkub_lg",
                                        "value": [
                                            "0"
                                        ],
                                        "width": 124
                                    },
                                    "name": "MyNumberField254",
                                    "configAlternates": {
                                        "scrollable": "boolean"
                                    },
                                    "designerId": "c1ebe794-b270-4fb1-bd65-0e481e96bce0"
                                },
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "autoStripChars": true,
                                        "fieldLabel": "Бюджет",
                                        "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                        "hideLabel": null,
                                        "hideTrigger": true,
                                        "labelWidth": 55,
                                        "layout|anchor": "100%",
                                        "name": "budjet",
                                        "value": [
                                            "0"
                                        ],
                                        "width": 125
                                    },
                                    "name": "MyNumberField255",
                                    "configAlternates": {
                                        "scrollable": "boolean"
                                    },
                                    "designerId": "8c61f2ad-0fc7-4a97-96ad-395ac1597274"
                                },
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "autoStripChars": true,
                                        "fieldLabel": "Перер",
                                        "fieldStyle": "background-color:#F0F8FF;font-size:10pt;text-align:right;",
                                        "hideLabel": null,
                                        "hideTrigger": true,
                                        "labelWidth": 55,
                                        "layout|anchor": "100%",
                                        "name": "pbudjet",
                                        "value": [
                                            "0"
                                        ],
                                        "width": 125
                                    },
                                    "name": "MyNumberField257",
                                    "configAlternates": {
                                        "scrollable": "boolean"
                                    },
                                    "designerId": "ef46316b-fcb5-4868-b755-ce7a0d2451cd"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "инфо перер",
                                "fieldStyle": "background-color:#F0F8FF;",
                                "layout|x": 0,
                                "layout|y": 125,
                                "name": "info",
                                "width": 620
                            },
                            "name": "MyTextField44",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "98baaa64-ef88-4c1e-af47-4370092fbb01"
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fieldLabel": "инфо бюджет",
                                "fieldStyle": "background-color:#F0F8FF;",
                                "layout|x": 0,
                                "layout|y": 155,
                                "name": "msq_lgota",
                                "width": 620
                            },
                            "name": "MyTextField45",
                            "configAlternates": {
                                "scrollable": "boolean"
                            },
                            "designerId": "674773f1-8d18-4300-bfb7-a3b1e8baab2c"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "formBind": true,
                                "height": 30,
                                "icon": "resources/css/images/ico/refresh.png",
                                "id": "btnaAppPodogrevReset",
                                "itemId": null,
                                "layout|x": 520,
                                "layout|y": 80,
                                "scale": "medium",
                                "text": "",
                                "tooltip": "Восстановить",
                                "width": 30
                            },
                            "name": "MyButton25",
                            "configAlternates": {
                                "tooltip": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "14e6142b-6e84-4784-b82c-5f6bdd36aa6b",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "var form = button.findParentByType('form').getForm();",
                                            "var grNach = Ext.getCmp('grNachPodogrev');",
                                            "var record = grNach.getSelectionModel().getSelection()[0];",
                                            "var ind  = grNach.getView().getStore().indexOf(record);",
                                            "grNach.getView().getSelectionModel().clearSelections();",
                                            "grNach.getView().getSelectionModel().select(ind);"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "66c562e8-a492-45ea-acb2-fde1ee5c560d"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "formBind": true,
                                "height": 30,
                                "icon": "resources/css/images/ico/schet.png",
                                "id": "btnPodogrevAppPerer",
                                "itemId": null,
                                "layout|x": 590,
                                "layout|y": 80,
                                "scale": "medium",
                                "text": "",
                                "tooltip": "Просчитать",
                                "width": 30
                            },
                            "name": "MyButton26",
                            "configAlternates": {
                                "tooltip": "string",
                                "scrollable": "boolean"
                            },
                            "designerId": "78aa2874-e227-4066-8905-f0dde9d67f5f",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "//this.up('#winAddVodomer').close();",
                                            "var form = button.findParentByType('form').getForm();",
                                            "//form.reset();",
                                            "var zadol = form.findField('zadol').getValue();",
                                            "var tarif = form.findField('tarif').getValue();",
                                            "var gkub = form.findField('kub').getValue();",
                                            "var gkub_lg = form.findField('gkub_lg').getValue();",
                                            "var people = form.findField('people').getValue();",
                                            "var perer = form.findField('perer').getValue();",
                                            "var budjet = form.findField('budjet').getValue();",
                                            "var pbudjet = form.findField('pbudjet').getValue();",
                                            "var oplacheno = form.findField('oplacheno').getValue();",
                                            "",
                                            "var nachisleno =0;",
                                            "var norma = 0;",
                                            "var gvoda = 0;",
                                            "",
                                            "if ((tarif===0)  &&  (gkub > 0 || people > 0)) {",
                                            "    Ext.MessageBox.show({",
                                            "        title: 'Проверка тарифа',",
                                            "        msg: 'Введите тариф по услуге',",
                                            "        buttons: Ext.MessageBox.OK,",
                                            "        icon: Ext.MessageBox.INFO",
                                            "    });",
                                            "} else {",
                                            "    if (gkub >0 ) {",
                                            "        gvoda = gkub * tarif - budjet;",
                                            "        norma = 0 ;",
                                            "    } else if (people >0 ) {",
                                            "        norma = people * tarif -budjet;",
                                            "        gvoda = 0;",
                                            "    } else {",
                                            "        norma = 0;",
                                            "        gvoda = 0;",
                                            "    }",
                                            "    nachisleno = gvoda + perer + norma  ;",
                                            "    form.findField('podogrev').setValue(gvoda);",
                                            "    form.findField('norma').setValue(norma);",
                                            "    form.findField('nachisleno').setValue(nachisleno);",
                                            "    form.findField('dolg').setValue(zadol + nachisleno - oplacheno);",
                                            "}"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "74def967-1712-4525-953e-fc7b223e2ff3"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}