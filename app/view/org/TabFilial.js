/*
 * File: app/view/org/TabFilial.js
 * Date: Mon Oct 19 2020 00:53:27 GMT+0300 (EEST)
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Ykis.view.org.TabFilial', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.tabfilial',

    requires: [
        'Ykis.view.org.TabFilialViewModel',
        'Ext.form.Panel',
        'Ext.form.FieldSet',
        'Ext.form.field.TextArea',
        'Ext.form.field.Number',
        'Ext.form.field.ComboBox',
        'Ext.form.RadioGroup',
        'Ext.form.field.Radio',
        'Ext.button.Button',
        'Ext.form.field.Hidden',
        'Ext.form.Label'
    ],

    viewModel: {
        type: 'tabfilial'
    },
    height: 854,
    id: 'tabFilial',
    scrollable: true,
    layout: 'fit',
    title: 'Объект',
    defaultListenerScope: true,

    items: [
        {
            xtype: 'form',
            height: 900,
            id: 'fmFilial',
            scrollable: true,
            width: 871,
            layout: 'absolute',
            bodyPadding: 10,
            title: '',
            items: [
                {
                    xtype: 'fieldset',
                    x: 10,
                    y: 50,
                    height: 145,
                    style: 'background-color: #DCDCDC;',
                    width: 750,
                    layout: 'absolute',
                    title: 'Наименование обьекта',
                    items: [
                        {
                            xtype: 'textareafield',
                            x: 0,
                            y: 0,
                            formBind: false,
                            width: 725,
                            fieldLabel: 'Полное',
                            labelWidth: 70,
                            name: 'fname',
                            allowBlank: false,
                            blankText: 'Поле должно быть заполнено',
                            grow: true,
                            maxLength: 250,
                            minLength: 1
                        },
                        {
                            xtype: 'textfield',
                            x: -1,
                            y: 65,
                            formBind: false,
                            width: 550,
                            fieldLabel: 'Краткое',
                            labelWidth: 70,
                            msgTarget: 'title',
                            name: 'name',
                            allowBlank: false,
                            blankText: 'Поле должно быть заполнено',
                            maxLength: 50,
                            minLength: 1
                        },
                        {
                            xtype: 'numberfield',
                            x: 135,
                            y: 95,
                            width: 135,
                            fieldLabel: 'филиал ид',
                            labelWidth: 70,
                            name: 'filial_id',
                            readOnly: true,
                            hideTrigger: true,
                            allowDecimals: false,
                            decimalPrecision: 0
                        },
                        {
                            xtype: 'checkboxfield',
                            x: 275,
                            y: 95,
                            fieldLabel: '',
                            name: 'golovnoe',
                            boxLabel: 'головное',
                            inputValue: '1',
                            uncheckedValue: '0'
                        },
                        {
                            xtype: 'checkboxfield',
                            x: 355,
                            y: 95,
                            fieldLabel: '',
                            name: 'ind',
                            boxLabel: 'как организация',
                            inputValue: '1',
                            uncheckedValue: '0'
                        },
                        {
                            xtype: 'numberfield',
                            x: 480,
                            y: 95,
                            width: 110,
                            fieldLabel: 'Код ВиК',
                            labelWidth: 50,
                            name: 'kod_vik',
                            hideTrigger: true,
                            allowDecimals: false,
                            decimalPrecision: 0
                        },
                        {
                            xtype: 'numberfield',
                            x: 595,
                            y: 95,
                            width: 130,
                            fieldLabel: 'Код ЮТКЭ',
                            labelWidth: 70,
                            name: 'kod_ytke',
                            hideTrigger: true,
                            allowDecimals: false,
                            decimalPrecision: 0
                        },
                        {
                            xtype: 'numberfield',
                            x: 0,
                            y: 95,
                            width: 130,
                            fieldLabel: 'Ид орган',
                            labelWidth: 70,
                            name: 'org_id',
                            editable: false,
                            hideTrigger: true,
                            allowDecimals: false,
                            decimalPrecision: 0
                        },
                        {
                            xtype: 'numberfield',
                            x: 565,
                            y: 65,
                            hidden: true,
                            width: 160,
                            fieldLabel: 'Новый Ид орг',
                            labelWidth: 90,
                            name: 'new_id',
                            hideTrigger: true,
                            allowDecimals: false,
                            decimalPrecision: 0
                        }
                    ]
                },
                {
                    xtype: 'fieldset',
                    x: 10,
                    y: 200,
                    height: 335,
                    style: 'background-color: #DCDCDC;',
                    width: 250,
                    title: 'Физический адрес',
                    items: [
                        {
                            xtype: 'combobox',
                            anchor: '100%',
                            id: 'cbRaionFilial',
                            padding: '5 5 5 5',
                            width: 225,
                            fieldLabel: 'Район',
                            labelWidth: 60,
                            name: 'raion_id',
                            editable: false,
                            emptyText: 'Выбор района',
                            displayField: 'raion',
                            queryMode: 'local',
                            store: 'StRaionOrg',
                            valueField: 'raion_id',
                            listeners: {
                                select: 'onCbRaionFilialSelect'
                            }
                        },
                        {
                            xtype: 'combobox',
                            anchor: '100%',
                            id: 'cbStreetFilial',
                            padding: '5 5 5 5',
                            width: 225,
                            fieldLabel: 'Улица',
                            labelWidth: 60,
                            name: 'street_id',
                            editable: false,
                            emptyText: 'Выбор улицы',
                            autoLoadOnValue: true,
                            displayField: 'street',
                            forceSelection: true,
                            queryCaching: false,
                            queryDelay: 20,
                            queryMode: 'local',
                            store: 'StStreetOrg',
                            valueField: 'street_id',
                            listeners: {
                                select: 'onCbStreetFilialSelect'
                            }
                        },
                        {
                            xtype: 'combobox',
                            anchor: '100%',
                            id: 'cbHouseFilial',
                            padding: '5 5 5 5',
                            width: 225,
                            fieldLabel: 'Дом',
                            labelWidth: 60,
                            name: 'house_id',
                            emptyText: 'Выбор дома',
                            displayField: 'house',
                            queryMode: 'local',
                            store: 'StHousesOrg',
                            valueField: 'house_id',
                            listeners: {
                                select: 'onCbHouseFilialSelect'
                            }
                        },
                        {
                            xtype: 'radiogroup',
                            anchor: '100%',
                            padding: '5 5 5 5',
                            width: 225,
                            fieldLabel: 'Объект',
                            hideLabel: true,
                            labelAlign: 'top',
                            labelWidth: 70,
                            items: [
                                {
                                    xtype: 'radiofield',
                                    name: 'is_flat',
                                    boxLabel: 'Квартира',
                                    inputValue: '1'
                                },
                                {
                                    xtype: 'radiofield',
                                    name: 'is_flat',
                                    boxLabel: 'Другое',
                                    checked: true,
                                    inputValue: '0'
                                }
                            ],
                            listeners: {
                                change: 'onRadiogroupChange1'
                            }
                        },
                        {
                            xtype: 'combobox',
                            anchor: '100%',
                            id: 'cbAddressFilial',
                            width: 230,
                            fieldLabel: 'Кварт',
                            labelWidth: 60,
                            name: 'address_id',
                            value: 0,
                            emptyText: 'Выбор квартиры',
                            displayField: 'address',
                            queryMode: 'local',
                            store: 'StAddressOrg',
                            valueField: 'address_id',
                            valueNotFoundText: '0'
                        },
                        {
                            xtype: 'checkboxfield',
                            handler: function(checkbox, newVal) {
                                //console.log(newVal);
                                var cbDteplomerFilial = Ext.getCmp('cbDteplomerFilial');

                                if (newVal) {
                                    if (cbDteplomerFilial.isHidden()) cbDteplomerFilial.show();

                                } else {
                                    if (cbDteplomerFilial.isVisible()) cbDteplomerFilial.hide();
                                }

                            },
                            anchor: '100%',
                            fieldLabel: 'Дтепломер',
                            name: 'dteplomer',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange5'
                            }
                        },
                        {
                            xtype: 'combobox',
                            anchor: '100%',
                            id: 'cbDteplomerFilial',
                            fieldLabel: 'Номер',
                            labelWidth: 60,
                            name: 'dteplomer_id',
                            emptyText: 'тепломер',
                            displayField: 'nomer',
                            queryMode: 'local',
                            store: 'StDTeplomerCb',
                            valueField: 'dteplomer_id'
                        },
                        {
                            xtype: 'checkboxfield',
                            handler: function(checkbox, newVal) {
                                //console.log(newVal);
                                var cbDvodomerFilial = Ext.getCmp('cbDvodomerFilial');

                                if (newVal) {
                                    if (cbDvodomerFilial.isHidden()) cbDvodomerFilial.show();

                                } else {
                                    if (cbDvodomerFilial.isVisible()) cbDvodomerFilial.hide();
                                }

                            },
                            anchor: '100%',
                            fieldLabel: 'Дводомер',
                            name: 'dvodomer',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange6'
                            }
                        },
                        {
                            xtype: 'combobox',
                            anchor: '100%',
                            id: 'cbDvodomerFilial',
                            fieldLabel: 'Номер',
                            labelWidth: 60,
                            name: 'dvodomer_id',
                            emptyText: 'водомер',
                            displayField: 'nomer',
                            queryMode: 'local',
                            store: 'StDVodomerCb',
                            valueField: 'dvodomer_id'
                        }
                    ]
                },
                {
                    xtype: 'fieldset',
                    anchor: '',
                    x: 10,
                    y: 600,
                    height: 200,
                    style: 'background-color: #DCDCDC;',
                    width: 500,
                    title: 'Тепловые нагрузки',
                    items: [
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            width: 225,
                            fieldLabel: 'Макс нагр на ГВС гкал/час зимой',
                            labelWidth: 290,
                            name: 'gkal_hw_gvs',
                            value: 0,
                            hideTrigger: true,
                            decimalPrecision: 6
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            width: 225,
                            fieldLabel: 'Макс нагр на ГВС гкал/год зимой',
                            labelWidth: 290,
                            name: 'gkal_yw_gvs',
                            value: 0,
                            hideTrigger: true,
                            decimalPrecision: 3
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            width: 225,
                            fieldLabel: 'Макс нагр на ГВС гкал/час летом',
                            labelWidth: 290,
                            name: 'gkal_hs_gvs',
                            value: 0,
                            hideTrigger: true,
                            decimalPrecision: 6
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            width: 225,
                            fieldLabel: 'Макс нагр на ГВС гкал/год летом',
                            labelWidth: 290,
                            name: 'gkal_ys_gvs',
                            value: 0,
                            hideTrigger: true,
                            decimalPrecision: 3
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            width: 225,
                            fieldLabel: 'Макс нагр на Отопление гкал/час',
                            labelWidth: 290,
                            name: 'gkal_h_ot',
                            value: 0,
                            hideTrigger: true,
                            decimalPrecision: 6,
                            step: 0.1
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            width: 225,
                            fieldLabel: 'Макс нагр на Отопление гкал/год ',
                            labelWidth: 290,
                            name: 'gkal_y_ot',
                            value: 0,
                            hideTrigger: true,
                            decimalPrecision: 3,
                            step: 0.1
                        }
                    ]
                },
                {
                    xtype: 'fieldset',
                    x: 270,
                    y: 365,
                    height: 170,
                    style: 'background-color: #DCDCDC;',
                    width: 240,
                    title: 'Приборы учета',
                    items: [
                        {
                            xtype: 'checkboxfield',
                            fieldLabel: 'Счетчик хв.',
                            name: 'xvodomer',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange'
                            }
                        },
                        {
                            xtype: 'checkboxfield',
                            fieldLabel: 'Счетчик гв.',
                            name: 'gvodomer',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange1'
                            }
                        },
                        {
                            xtype: 'checkboxfield',
                            fieldLabel: 'Норма хв.',
                            name: 'norma_xv',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange2'
                            }
                        },
                        {
                            xtype: 'checkboxfield',
                            fieldLabel: 'Норма гв.',
                            name: 'norma_gv',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange3'
                            }
                        },
                        {
                            xtype: 'checkboxfield',
                            fieldLabel: 'Тепломер',
                            name: 'teplomer',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange4'
                            }
                        }
                    ]
                },
                {
                    xtype: 'fieldset',
                    x: 10,
                    y: 540,
                    height: 55,
                    style: 'background-color: #DCDCDC;',
                    width: 750,
                    layout: 'absolute',
                    title: 'Включать в отчеты',
                    items: [
                        {
                            xtype: 'checkboxfield',
                            x: 20,
                            y: 0,
                            fieldLabel: 'по теплу',
                            labelWidth: 70,
                            name: 'rteplo',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange7'
                            }
                        },
                        {
                            xtype: 'checkboxfield',
                            x: 425,
                            y: 0,
                            fieldLabel: 'по воде',
                            name: 'rvoda',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange8'
                            }
                        },
                        {
                            xtype: 'button',
                            handler: function(button, event) {
                                //in use
                                var winDogovor = Ext.ClassManager.instantiateByAlias('widget.windogovor');

                                var dt = new Date();

                                var form = winDogovor.down('#fmDogovor');
                                var stUser = Ext.data.StoreManager.get("StUser");
                                var stAppartment = Ext.data.StoreManager.get("StAppartment");

                                var StDogovor = Ext.data.StoreManager.get("StDogovor");

                                var values =stUser.getAt(0);


                                var record_app =stAppartment.getAt(0);
                                //console.log(record_app);
                                var login = values.get('login');
                                var password = values.get('password');
                                var address_id = values.get('address_id');

                                StDogovor.load({
                                    params: {
                                        address_id:  values.get('address_id'),
                                        what:'getDogovorYtke',
                                        login:values.get('login'),
                                        password:values.get('password')
                                    },
                                    callback: function(records,operation,success){


                                        if(success){

                                            if (records.length) {
                                                form.getForm().loadRecord(records[0]);
                                                form.down('#winBtnAddDogovor').setText('Обновить договор');
                                                values.set({'vibor':'editDogovorYtke'});
                                                stUser.sync();
                                            } else {
                                                form.down('#winBtnAddDogovor').setText('Добавить договор');
                                                form.getForm().findField('start').setValue(Ext.Date.format(dt, 'd-m-Y'));
                                                form.getForm().loadRecord(record_app);
                                                values.set({'vibor':'addDogovorYtke'});
                                                stUser.sync();

                                            }

                                        }
                                    },
                                    scope:this
                                });

                                winDogovor.show();
                                //V
                                //var nr =  Ext.getCmp('fldDogVik').getValue();
                                //var data =  Ext.getCmp('fldDogVikData').getValue();




                            },
                            x: 160,
                            y: 0,
                            id: 'btnOpenWinDogovorOrgYtke',
                            width: 155,
                            icon: 'resources/css/images/ico/yes.png',
                            iconAlign: 'right',
                            text: 'Договіра немає&nbsp;&nbsp;&nbsp;',
                            textAlign: 'left'
                        },
                        {
                            xtype: 'button',
                            handler: function(button, event) {
                                //M
                                var me = this;
                                var StUser = Ext.data.StoreManager.get("StUser");
                                var StReport = Ext.data.StoreManager.get("StReport");
                                var values =StUser.getAt(0);
                                var addr = values.data.address_id;

                                var usertype = 1;

                                //V
                                var tabPnCenter =  Ext.getCmp('tabPnCenter');//me.getTabPnCenter();


                                //C

                                if (addr) {

                                    var report = 'DogovorYtke_flat';
                                    var namereport = 'Договор кв. ЮТКЕ';

                                    var value = {
                                        login:values.get('login'),
                                        password:values.get('password'),
                                        report:report,
                                        what:report,
                                        address_id: addr
                                    };

                                    var tab = tabPnCenter.child('#'+report);

                                    if (!tab) {
                                        tab  = tabPnCenter.add({
                                            xtype:'tabreportorg',
                                            title:namereport,
                                            id:''+report+''
                                        });

                                        tabPnCenter.setActiveTab(tab);

                                    }else{

                                        tabPnCenter.setActiveTab(tab);
                                    }

                                    var reppan = tab.getComponent(0);



                                    // Basic mask:

                                    var myMask =new Ext.LoadMask({
                                        target: reppan ,
                                        msg:"Загрузка..."
                                    });
                                    myMask.show();


                                    QueryReport.getResults(value,function(data){
                                        if (data){

                                            //    reportHead.update(data.head);
                                            reppan.update(data.content);
                                            //      reportFoot.update(data.foot);
                                            Ext.REPORTCONTENT =data.content;
                                            myMask.hide();


                                        } else {
                                            myMask.hide();

                                            Ext.MessageBox.show({
                                                title: 'Ошибка ',
                                                msg: 'Документ не создан',
                                                buttons: Ext.MessageBox.OK,
                                                icon: Ext.MessageBox.ERROR

                                            });

                                        }

                                    });

                                }
                            },
                            x: 320,
                            y: 0,
                            shim: false,
                            icon: 'resources/css/images/ico/printer.png',
                            text: '',
                            tooltip: 'Печать договора ЮТКЕ'
                        }
                    ]
                },
                {
                    xtype: 'hiddenfield',
                    x: 302,
                    y: 207,
                    id: 'fldDogOrgYtke',
                    fieldLabel: 'Label',
                    name: 'dog_ytke'
                },
                {
                    xtype: 'fieldset',
                    x: 520,
                    y: 635,
                    height: 175,
                    style: 'background-color: #DCDCDC;',
                    width: 245,
                    layout: 'absolute',
                    title: 'Потребляемые услуги',
                    items: [
                        {
                            xtype: 'checkboxfield',
                            x: 0,
                            y: 30,
                            fieldLabel: 'Отопление',
                            labelWidth: 70,
                            name: 'vkl_otopl',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange9'
                            }
                        },
                        {
                            xtype: 'checkboxfield',
                            x: 0,
                            y: 55,
                            fieldLabel: 'Подогрев',
                            labelWidth: 70,
                            name: 'vkl_gvoda',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange10'
                            }
                        },
                        {
                            xtype: 'checkboxfield',
                            x: 0,
                            y: 80,
                            fieldLabel: 'Хол. вода',
                            labelWidth: 70,
                            name: 'vkl_xvoda',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange11'
                            }
                        },
                        {
                            xtype: 'checkboxfield',
                            x: 0,
                            y: 105,
                            fieldLabel: 'Стоки',
                            labelWidth: 70,
                            name: 'vkl_stoki',
                            boxLabel: 'Нет',
                            inputValue: '1',
                            uncheckedValue: '0',
                            listeners: {
                                change: 'onCheckboxfieldChange12'
                            }
                        },
                        {
                            xtype: 'fieldset',
                            anchor: '100%',
                            x: 120,
                            y: 5,
                            height: 140,
                            style: 'background-color: #f3f3f3;',
                            width: 120,
                            title: 'Тариф',
                            items: [
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    width: 100,
                                    fieldLabel: '',
                                    labelAlign: 'right',
                                    name: 'tarif_ot',
                                    hideTrigger: true,
                                    decimalPrecision: 3
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    width: 100,
                                    fieldLabel: '',
                                    labelAlign: 'right',
                                    name: 'tarif_gv',
                                    hideTrigger: true,
                                    decimalPrecision: 3
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    width: 100,
                                    fieldLabel: '',
                                    labelAlign: 'right',
                                    name: 'tarif_xv',
                                    hideTrigger: true,
                                    decimalPrecision: 4
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    width: 100,
                                    fieldLabel: '',
                                    labelAlign: 'right',
                                    name: 'tarif_st',
                                    hideTrigger: true,
                                    decimalPrecision: 4
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'fieldset',
                    x: 10,
                    y: 460,
                    height: 210,
                    hidden: true,
                    width: 380,
                    title: 'Данные по текущему договору',
                    items: [
                        {
                            xtype: 'textfield',
                            anchor: '100%',
                            width: 328,
                            fieldLabel: 'Договор',
                            name: 'dog_nomer'
                        },
                        {
                            xtype: 'textfield',
                            anchor: '100%',
                            width: 328,
                            fieldLabel: 'от',
                            name: 'dog_data_start'
                        },
                        {
                            xtype: 'textfield',
                            anchor: '100%',
                            width: 328,
                            fieldLabel: 'по',
                            name: 'dog_data_end'
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            fieldLabel: 'Тариф на момент заключ.дог.',
                            name: 'dog_tarif'
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            fieldLabel: 'Год. сумма опл. по договору',
                            name: 'dog_y_sum'
                        }
                    ]
                },
                {
                    xtype: 'button',
                    x: 10,
                    y: 810,
                    id: 'btFilialDelete',
                    width: 160,
                    icon: 'resources/css/images/ico/delete.png',
                    text: 'удалить обьект'
                },
                {
                    xtype: 'button',
                    x: 520,
                    y: 605,
                    formBind: true,
                    id: 'btFilialUpdate',
                    width: 240,
                    icon: 'resources/css/images/ico/edit.png',
                    text: 'Обновить данные'
                },
                {
                    xtype: 'label',
                    x: 10,
                    y: 5,
                    height: 40,
                    id: 'showOrgFilial',
                    style: '{color: #D15706; text-shadow: -1px -1px white, 1px 1px #333;font-size:14pt;}',
                    width: 740,
                    text: 'Организация'
                },
                {
                    xtype: 'fieldset',
                    x: 520,
                    y: 270,
                    height: 265,
                    style: 'background-color: #DCDCDC;',
                    width: 240,
                    title: 'Технические Характеристики',
                    items: [
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            fieldLabel: 'Площа (м2)',
                            name: 'area',
                            value: 0,
                            allowBlank: false,
                            hideTrigger: true
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            fieldLabel: 'Висота',
                            name: 'visota',
                            value: 0,
                            allowBlank: false,
                            hideTrigger: true
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            fieldLabel: 'Обьем  (м3)',
                            name: 'volume',
                            value: 0,
                            hideTrigger: true
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            fieldLabel: 'Персонал',
                            name: 'people',
                            value: 0,
                            hideTrigger: true,
                            decimalPrecision: 0
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            width: 218,
                            fieldLabel: 'Гвода (лс/чел)',
                            name: 'nrx_gvs_d',
                            value: 0,
                            hideTrigger: true
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            width: 225,
                            fieldLabel: 'Хвода (лс/чел)',
                            name: 'nrx_xv_d',
                            value: 0,
                            hideTrigger: true
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            width: 225,
                            fieldLabel: 'Стоки ( %)',
                            name: 'pstoki',
                            value: 0,
                            hideTrigger: true
                        },
                        {
                            xtype: 'numberfield',
                            anchor: '100%',
                            fieldLabel: 'График (час)',
                            name: 'qty_hour',
                            value: 0,
                            hideTrigger: true,
                            decimalPrecision: 0
                        }
                    ]
                },
                {
                    xtype: 'combobox',
                    x: 270,
                    y: 210,
                    style: 'background-color: #e0e0e0;',
                    width: 490,
                    fieldLabel: 'Призначення приміщення воды',
                    labelWidth: 200,
                    name: 'type_id',
                    value: 0,
                    displayField: 'name',
                    queryMode: 'local',
                    store: 'StTypes',
                    valueField: 'type_id',
                    listeners: {
                        select: 'onCbTypeObjectVodaSelect'
                    }
                },
                {
                    xtype: 'combobox',
                    x: 270,
                    y: 240,
                    style: 'background-color: #e0e0e0;',
                    width: 490,
                    fieldLabel: 'Призначення приміщення тепла',
                    labelWidth: 200,
                    name: 'typeh_id',
                    value: 0,
                    editable: false,
                    displayField: 'name',
                    queryMode: 'local',
                    store: 'StUhpte',
                    valueField: 'type_id'
                },
                {
                    xtype: 'combobox',
                    x: 270,
                    y: 335,
                    style: 'background-color: #e0e0e0;',
                    width: 240,
                    fieldLabel: 'Режим праці',
                    name: 'rwork_id',
                    value: 0,
                    displayField: 'name',
                    store: 'StRwork',
                    valueField: 'rwork_id'
                },
                {
                    xtype: 'combobox',
                    x: 270,
                    y: 275,
                    style: 'background-color: #e0e0e0;',
                    width: 240,
                    fieldLabel: 'Вид собств Вик',
                    name: 'sobstv_id',
                    value: 0,
                    displayField: 'name',
                    queryMode: 'local',
                    store: 'StSobstv',
                    valueField: 'sobstv_id'
                },
                {
                    xtype: 'combobox',
                    x: 270,
                    y: 305,
                    style: 'background-color: #e0e0e0;',
                    width: 240,
                    fieldLabel: 'Вид собств Ютке',
                    labelWidth: 110,
                    name: 'usobstv_id',
                    value: 0,
                    displayField: 'name',
                    queryMode: 'local',
                    store: 'StSobstvu',
                    valueField: 'usobstv_id'
                }
            ]
        }
    ],

    onCbRaionFilialSelect: function(combo, record, eOpts) {

        var me = this;


        var StHouses = Ext.data.StoreManager.get("StHousesOrg");
        var StStreet = Ext.data.StoreManager.get("StStreetOrg");
        var StAddress = Ext.data.StoreManager.get("StAddressOrg");
        var StDTeplomerCb = Ext.data.StoreManager.get("StDTeplomerCb");
        var StDvodomerCb = Ext.data.StoreManager.get("StDVodomerCb");

        var store =combo.getStore();

        var cbStreet = Ext.getCmp("cbStreetFilial");
        var cbHouse = Ext.getCmp("cbHouseFilial");
        var cbDteplomerFilial = Ext.getCmp("cbDteplomerFilial");
        var cbDvodomerFilial = Ext.getCmp("cbDvodomerFilial");
        var cbAddress = Ext.getCmp("cbAddressFilial");


        var selected = record;



        if (selected ) {
            StStreet.removeAll();
            StHouses.removeAll();
            StAddress.removeAll();
            StDTeplomerCb.removeAll();
            StDvodomerCb.removeAll();
            cbDteplomerFilial.clearValue();
            cbDvodomerFilial.clearValue();
            cbStreet.clearValue();
            cbHouse.clearValue();
            cbAddress.clearValue();

        //console.log(selected.get("raion_id"));
            StStreet.load({
                params: {
                    what:"StreetsFromRaion",
                    what_id: selected.get("raion_id")
                },
                scope: this
            });
            StHouses.load({
                params: {
                    what:"HousesFromRaion",
                    what_id: selected.get("raion_id")
                },
                scope: this
            });
        }

    },

    onCbStreetFilialSelect: function(combo, record, eOpts) {

        //COMBO

        var cbHouse = Ext.getCmp("cbHouseFilial");
        var cbDteplomerFilial = Ext.getCmp('cbDteplomerFilial');
        var cbDvodomerFilial = Ext.getCmp('cbDvodomerFilial');
        var cbAddress = Ext.getCmp('cbAddressFilial');

        //STORE

        var stHouses = Ext.data.StoreManager.get("StHousesOrg");
        var StAddress = Ext.data.StoreManager.get("StAddressOrg");
        var StDTeplomerCb = Ext.data.StoreManager.get("StDTeplomerCb");
        var StDvodomerCb = Ext.data.StoreManager.get("StDVodomerCb");//QueryTeplomer.getResults


        var store =combo.getStore();

        var selected = record;

        //LOGIKA

        if ((selected) ) {
            cbHouse.clearValue();
            stHouses.removeAll();
            StAddress.removeAll();
            cbAddress.clearValue();
            StDTeplomerCb.removeAll();
            StDvodomerCb.removeAll();
            cbDteplomerFilial.clearValue();
            cbDvodomerFilial.clearValue();
            stHouses.load({
                params: {
                    what:'HousesFromStreet',
                    what_id: selected.get('street_id')
                },
                scope: this
            });

        }
    },

    onCbHouseFilialSelect: function(combo, record, eOpts) {


        //COMBO

        var cbAddress = Ext.getCmp('cbAddressFilial');
        var cbDteplomerFilial = Ext.getCmp('cbDteplomerFilial');
        var cbDvodomerFilial = Ext.getCmp('cbDvodomerFilial');

        //STORE
        var stAddress = Ext.data.StoreManager.get('StAddressOrg');
        var StDTeplomerCb = Ext.data.StoreManager.get("StDTeplomerCb");//QueryTeplomer.getResults
        var StDvodomerCb = Ext.data.StoreManager.get("StDVodomerCb");//QueryTeplomer.getResults
        var store =combo.getStore();

        var selected = record;

        //LOGIKA

        if ((selected) && !store.getById(selected.get('house_id'))) {
            cbAddress.clearValue();
            stAddress.removeAll();
            StDTeplomerCb.removeAll();
            StDvodomerCb.removeAll();
            cbDteplomerFilial.clearValue();
            cbDvodomerFilial.clearValue();
            stAddress.load({
                params: {
                    what:'AddressFromHouses',
                    what_id: selected.get('house_id')
                },
                scope: this
            });
            StDTeplomerCb.load({
                params: {
                    what_id:selected.get('house_id'),
                    what:'DteplomerHouse'
                },
                scope:this
            });
            StDvodomerCb.load({
                params: {
                    what_id:selected.get('house_id'),
                    what:'DvodomerHouse'
                },
                scope:this
            });
        }
    },

    onRadiogroupChange1: function(field, newValue, oldValue, eOpts) {
        var me =this;

        var cbAddress = Ext.getCmp('cbAddressFilial');


        if (newValue.is_flat==='0') {

            cbAddress.setValue('0');

            if (cbAddress.isVisible()) cbAddress.hide();
        } else {
            if (cbAddress.isHidden()) cbAddress.show();
        }

    },

    onCheckboxfieldChange5: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange6: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange1: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange2: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange3: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange4: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange7: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange8: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange9: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange10: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange11: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCheckboxfieldChange12: function(field, newValue, oldValue, eOpts) {
        if(newValue){
            field.setBoxLabel("Да");
        }else{
            field.setBoxLabel("Нет");
        }
    },

    onCbTypeObjectVodaSelect: function(combo, record, eOpts) {
        var form = combo.findParentByType('form');


        var selected = record;


        //LOGIKA

        if(selected){
            form.getForm().findField('nrx_gvs_d').setValue(selected.get('nrgv'));
            form.getForm().findField('nrx_xv_d').setValue(selected.get('nrxv'));
            form.getForm().findField('pstoki').setValue(selected.get('pstoki'));
            // console.log(selected);
        }
    }

});