/*
 * File: app/view/sprav/TabEnergoAuditViewController.js
 * Date: Wed Dec 09 2020 12:37:33 GMT+0200 (EET)
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Ykis.view.sprav.TabEnergoAuditViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.tabenergoaudit',

    onGrEnauditOutSelect: function(rowmodel, record, index, eOpts) {
        var btnAddHousesEnaudit = Ext.getCmp('btnAddHousesEnaudit');
        var btnDelHousesEnaudit = Ext.getCmp('btnDelHousesEnaudit');
        btnAddHousesEnaudit.setDisabled(false);
        btnDelHousesEnaudit.setDisabled(true);

    },

    onGrEnauditInSelect: function(rowmodel, record, index, eOpts) {
        var btnAddHousesEnaudit = Ext.getCmp('btnAddHousesEnaudit');
        var btnDelHousesEnaudit = Ext.getCmp('btnDelHousesEnaudit');
        var btnEnControl = Ext.getCmp('btnEnControl');
        var btnInsTnb = Ext.getCmp('btnInsTnb');
        var tnb = Ext.getCmp('tnb');

        btnAddHousesEnaudit.setDisabled(true);
        btnDelHousesEnaudit.setDisabled(false);
        btnInsTnb.setDisabled(false);
        btnEnControl.setDisabled(false);
        tnb.setDisabled(false);


    },

    onGrEnauditInRowClick: function(tableview, record, tr, rowIndex, e, eOpts) {
        var stUser = Ext.data.StoreManager.get("StUser");
        var StOrgByDteplomer = Ext.data.StoreManager.get("StOrgByDteplomer");
        var StAddressDt = Ext.data.StoreManager.get("StAddressDt");
        var values =stUser.getAt(0);
        var login = values.get('login');
        var password = values.get('password');
        StOrgByDteplomer.removeAll();
        StAddressDt.removeAll();
        //console.log(record);

        if (record) {
            StAddressDt.load({
                params:
                {
                    login:login,
                    password:password,
                    house_id:record.data.house_id
                },
                scope:this
            });
            StOrgByDteplomer.load({
                params: {
                    login:login,
                    password:password,
                    house_id:record.data.house_id,
                    what:"AllOrgByHouse",
                },
                scope:this
            });
        }
    }

});
