/*
 * File: app/view/sprav/WinEditOplata.js
 * Date: Fri Dec 11 2020 11:28:59 GMT+0200 (EET)
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Ykis.view.sprav.WinEditOplata', {
    extend: 'Ext.window.Window',
    alias: 'widget.wineditoplata',

    requires: [
        'Ykis.view.sprav.WinEditOplataViewModel',
        'Ext.form.Panel',
        'Ext.form.FieldSet',
        'Ext.form.field.Date',
        'Ext.form.field.ComboBox',
        'Ext.form.field.Number',
        'Ext.button.Button'
    ],

    viewModel: {
        type: 'wineditoplata'
    },
    height: 569,
    id: 'winEditOplata',
    width: 464,
    title: 'Редактирование оплаты',
    modal: true,

    items: [
        {
            xtype: 'form',
            height: 539,
            id: 'fmEditOplata',
            layout: 'fit',
            title: '',
            items: [
                {
                    xtype: 'fieldset',
                    height: 395,
                    style: 'background-color: #DCDCDC;',
                    width: 415,
                    layout: 'absolute',
                    title: '',
                    items: [
                        {
                            xtype: 'textfield',
                            x: 95,
                            y: 5,
                            width: 125,
                            fieldLabel: 'Запись_ид',
                            labelAlign: 'top',
                            labelWidth: 70,
                            name: 'rec_id',
                            readOnly: true,
                            allowBlank: false
                        },
                        {
                            xtype: 'fieldset',
                            x: 225,
                            y: 20,
                            height: 155,
                            style: 'background-color: #F1EEEE;',
                            width: 195,
                            title: 'Период платежа',
                            items: [
                                {
                                    xtype: 'textfield',
                                    anchor: '100%',
                                    formBind: false,
                                    width: 175,
                                    fieldLabel: 'Год',
                                    labelWidth: 50,
                                    name: 'god',
                                    allowBlank: false,
                                    blankText: 'Поле обязательное для заполнения'
                                },
                                {
                                    xtype: 'datefield',
                                    anchor: '100%',
                                    width: 174,
                                    fieldLabel: 'дата',
                                    labelWidth: 50,
                                    name: 'data',
                                    allowBlank: false,
                                    format: 'd-m-Y',
                                    submitFormat: 'Ymd'
                                },
                                {
                                    xtype: 'textfield',
                                    anchor: '100%',
                                    width: 177,
                                    fieldLabel: 'время ввода',
                                    labelAlign: 'top',
                                    name: 'data_in',
                                    allowBlank: false
                                }
                            ]
                        },
                        {
                            xtype: 'fieldset',
                            x: 10,
                            y: 55,
                            height: 120,
                            style: 'background-color: #F1EEEE;',
                            width: 210,
                            title: 'Адрес',
                            items: [
                                {
                                    xtype: 'textfield',
                                    anchor: '100%',
                                    width: 160,
                                    fieldLabel: '',
                                    labelWidth: 60,
                                    name: 'address'
                                },
                                {
                                    xtype: 'textfield',
                                    formBind: false,
                                    fieldLabel: 'квартира_ид',
                                    labelWidth: 80,
                                    name: 'address_id',
                                    allowBlank: false,
                                    blankText: 'Поле обязательное для заполнения'
                                },
                                {
                                    xtype: 'textfield',
                                    fieldLabel: 'Район',
                                    labelWidth: 80,
                                    name: 'raion_id'
                                }
                            ]
                        },
                        {
                            xtype: 'fieldset',
                            x: 225,
                            y: 185,
                            height: 270,
                            style: 'background-color: #F1EEEE;',
                            width: 195,
                            title: 'Приход',
                            items: [
                                {
                                    xtype: 'combobox',
                                    anchor: '100%',
                                    formBind: false,
                                    style: 'background-color: #C2D9C9;',
                                    width: 176,
                                    fieldLabel: '',
                                    labelAlign: 'top',
                                    labelWidth: 50,
                                    name: 'prixod',
                                    allowBlank: false,
                                    displayField: 'prixod',
                                    queryMode: 'local',
                                    store: 'StPrixodEdit',
                                    valueField: 'prixod'
                                },
                                {
                                    xtype: 'textfield',
                                    anchor: '100%',
                                    formBind: false,
                                    fieldLabel: 'Касса',
                                    labelAlign: 'top',
                                    labelWidth: 60,
                                    name: 'kassa',
                                    allowBlank: false,
                                    blankText: 'Поле обязательное для заполнения'
                                },
                                {
                                    xtype: 'textfield',
                                    anchor: '100%',
                                    formBind: false,
                                    fieldLabel: 'кассир',
                                    labelAlign: 'top',
                                    labelWidth: 60,
                                    name: 'operator',
                                    allowBlank: false,
                                    blankText: 'Поле обязательное для заполнения'
                                },
                                {
                                    xtype: 'fieldset',
                                    anchor: '100%',
                                    height: 92,
                                    margin: '20 0 0 0',
                                    style: 'background-color: #CCCCCC;',
                                    width: 155,
                                    title: 'по банку',
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            formBind: false,
                                            width: 130,
                                            fieldLabel: 'номер',
                                            labelWidth: 50,
                                            name: 'nomer',
                                            blankText: 'Поле обязательное для заполнения'
                                        },
                                        {
                                            xtype: 'textfield',
                                            formBind: false,
                                            width: 130,
                                            fieldLabel: 'признак',
                                            labelWidth: 50,
                                            name: 'pr',
                                            blankText: 'Поле обязательное для заполнения'
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'fieldset',
                            x: 10,
                            y: 185,
                            height: 280,
                            padding: '5 5 5 5',
                            style: 'background-color: #F1EEEE;',
                            width: 210,
                            title: 'Оплачено',
                            items: [
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    fieldLabel: 'Квартплата',
                                    labelWidth: 80,
                                    name: 'kvartplata',
                                    value: 0,
                                    fieldStyle: 'background-color:#F0F8FF;font-size:11pt;text-align:right;',
                                    inputType: 'number',
                                    hideTrigger: true
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    fieldLabel: 'Р.фонд',
                                    labelWidth: 80,
                                    name: 'remont',
                                    value: 0,
                                    fieldStyle: 'background-color:#F0F8FF;font-size:11pt;text-align:right;',
                                    inputType: 'number',
                                    hideTrigger: true
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    fieldLabel: 'Отопление',
                                    labelWidth: 80,
                                    name: 'otoplenie',
                                    value: 0,
                                    fieldStyle: 'background-color:#F0F8FF;font-size:11pt;text-align:right;',
                                    inputType: 'number',
                                    hideTrigger: true
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    fieldLabel: 'ПТН',
                                    labelWidth: 80,
                                    name: 'ptn',
                                    value: 0,
                                    fieldStyle: 'background-color:#F0F8FF;font-size:11pt;text-align:right;',
                                    inputType: 'number',
                                    hideTrigger: true
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    fieldLabel: 'Подогрев',
                                    labelWidth: 80,
                                    name: 'podogrev',
                                    value: 0,
                                    fieldStyle: 'background-color:#F0F8FF;font-size:11pt;text-align:right;',
                                    inputType: 'number',
                                    hideTrigger: true
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    fieldLabel: 'Вода',
                                    labelWidth: 80,
                                    name: 'voda',
                                    value: 0,
                                    fieldStyle: 'background-color:#F0F8FF;font-size:11pt;text-align:right;',
                                    inputType: 'number',
                                    hideTrigger: true
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    fieldLabel: 'Стоки',
                                    labelWidth: 80,
                                    name: 'stoki',
                                    value: 0,
                                    fieldStyle: 'background-color:#F0F8FF;font-size:11pt;text-align:right;',
                                    inputType: 'number',
                                    hideTrigger: true
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    fieldLabel: 'ТБО',
                                    labelWidth: 80,
                                    name: 'tbo',
                                    value: 0,
                                    fieldStyle: 'background-color:#F0F8FF;font-size:11pt;text-align:right;',
                                    inputType: 'number',
                                    hideTrigger: true
                                },
                                {
                                    xtype: 'numberfield',
                                    anchor: '100%',
                                    fieldLabel: 'Сумма',
                                    labelWidth: 80,
                                    name: 'summa',
                                    value: 0,
                                    fieldStyle: 'background-color:#F0F8FF;font-size:11pt;text-align:right;',
                                    inputType: 'number',
                                    hideTrigger: true
                                }
                            ]
                        },
                        {
                            xtype: 'button',
                            handler: function(button, event) {
                                this.up('#winEditOplata').close();
                            },
                            x: 5,
                            y: 25,
                            width: 80,
                            icon: 'resources/css/images/ico/delete.png',
                            text: 'Отмена'
                        },
                        {
                            xtype: 'button',
                            x: 260,
                            y: 465,
                            formBind: true,
                            id: 'btEditOplata',
                            margin: '10 10 5 10',
                            width: 115,
                            icon: 'resources/css/images/ico/add.png',
                            scale: 'medium',
                            text: 'Записать'
                        },
                        {
                            xtype: 'button',
                            handler: function(button, event) {
                                var form = button.findParentByType('form').getForm();
                                var grOplata = Ext.getCmp('grOplata');
                                var value  = grOplata.getView().getSelectionModel().getSelection()[0];
                                form.loadRecord(value);

                            },
                            x: 10,
                            y: 475,
                            formBind: true,
                            margin: '0 10 0 0',
                            width: 35,
                            icon: 'resources/css/images/ico/refresh.png',
                            scale: 'medium',
                            text: '',
                            tooltip: 'Восстановить'
                        },
                        {
                            xtype: 'button',
                            handler: function(button, event) {
                                var form = button.findParentByType('form');
                                var oplata = 0;
                                var kvartplata = form.getForm().findField('kvartplata').getValue();
                                var remont = form.getForm().findField('remont').getValue();
                                var otoplenie = form.getForm().findField('otoplenie').getValue();
                                var ptn = form.getForm().findField('ptn').getValue();

                                var podogrev = form.getForm().findField('podogrev').getValue();
                                var voda = form.getForm().findField('voda').getValue();
                                var stoki = form.getForm().findField('stoki').getValue();
                                var tbo = form.getForm().findField('tbo').getValue();

                                oplata = kvartplata + remont + otoplenie + ptn + podogrev + voda + stoki + tbo;

                                form.getForm().findField('summa').setValue(oplata);


                            },
                            x: 85,
                            y: 475,
                            formBind: true,
                            width: 160,
                            icon: 'resources/css/images/ico/schet.png',
                            scale: 'medium',
                            text: 'Просчитать'
                        }
                    ]
                }
            ]
        }
    ]

});